**apis-build\_version\_up\_system**
=====
**Rev 0.6**

# **CONTENTS**
- [**apis-build\_version\_up\_system**](#apis-build_version_up_system)
- [**CONTENTS**](#contents)
- [**1. Terms and Abbreviations**](#1-terms-and-abbreviations)
- [**2. Overview**](#2-overview)
- [**3. Software Architecture**](#3-software-architecture)
- [**4. Folder and File Structure**](#4-folder-and-file-structure)
  - [**4.1. Folders and files in the apis-build\_version\_up\_system folder**](#41-folders-and-files-in-the-apis-build_version_up_system-folder)
  - [**4.2. Files generated by CopInfoTransformer**](#42-files-generated-by-copinfotransformer)
  - [**4.3. Log files generated during program execution**](#43-log-files-generated-during-program-execution)
- [**5. Configuration Files**](#5-configuration-files)
  - [**5.1. cop-\*.xml Files**](#51-cop-xml-files)
  - [**5.2. The installer.conf file**](#52-the-installerconf-file)
  - [**5.3. The make.conf file**](#53-the-makeconf-file)
- [**6. Open-Source Software Licenses**](#6-open-source-software-licenses)
- [**7. Preparation**](#7-preparation)
  - [**7.1. IoT board preparation example**](#71-iot-board-preparation-example)
  - [**7.2. Configuration file preparation example**](#72-configuration-file-preparation-example)
  - [**7.3. Example of installation on an IoT board**](#73-example-of-installation-on-an-iot-board)


# **1. Terms and Abbreviations**

<table>
<thead>
<tr class="header">
<th><strong>Term</strong></th>
<th><strong>Explanation</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>apis-main</td>
<td>Software for power interchange developed by Sony CSL that enables autonomous decentralized control. (See the apis-main specifications for more information.)</td>
</tr>
<tr class="even">
<td>apis-web</td>
<td>Software that provides Main Controller with information that is specific to each node installed by apis-main and information related to power interchange between nodes. (See the apis-web specifications for more information.)</td>
</tr>
<tr class="odd">
<td>apis-ccc</td>
<td>Software for uploading node-specific information on nodes installed by apis-main and information that is related to power interchange between nodes to Service Center servers, etc. and for downloading node configuration files from servers for operation and maintenance. (See the apis-ccc specifications for more information.)</td>
</tr>
<tr class="even">
<td>apis-log</td>
<td><p>Software for uploading received UDP messages and error information to Service Center servers, etc.</p>
<p>(See the apis-log specifications for more information.)</p></td>
</tr>
<tr class="odd">
<td>apis-main_controller</td>
<td><p>Web app software developed by Sony CLS for real-time display of the status of each installed node and the status of power interchange.</p>
<p>(See the apis-main_controller specifications for more information.)</p></td>
</tr>
<tr class="even">
<td>apis-emulator</td>
<td><p>Software that emulates the flow of power, including power generation and consumption by multiple residences and storage battery charging and discharging, by feeding data such as the amount of available solar radiation and the power consumption of residences to a computer model of the hardware system.</p>
<p>(See the apis-emulator specifications for more information.)</p></td>
</tr>
<tr class="odd">
<td>apis-dcdc_batt_comm</td>
<td><p>A device driver developed by the Sony CSL for the EZA2500 to obtain storage battery information.</p>
<p>(See the apis-dcdc_batt_comm specifications for more information.)</p></td>
</tr>
<tr class="odd">
<td>EZA2500</td>
<td>Used in this document to refer to the EZA-2500-32048SC0 custom device of the TDK Lambda EZA2500 Series.</td>
</tr>
<tr class="even">
<td>COP</td>
<td>Refers to “Computer for Operating the Program,” which is processing equipment for running APIS-related software.</td>
</tr>
</tbody>
</table>

<br>

# **2. Overview**

The apis-build\_version\_up\_system clones all of the software needed to build the APIS evaluation environment from GitHub/Sony CSL in a single batch, builds the software, generates the various configuration files required for APIS operation according to the configuration file, and then installs all of the software on multiple nodes (assumed to be IoT boards in this case) as shown in Figure 2-1. This software facilitates construction of a multi-node APIS evaluation environment. The default environment comprises a node on which apis-emulator node runs (Figure 2-1: IoT Board ZERO), a node on which apis-main\_controller and apis-web run (Figure 2-1: IoT Board FIRST), and nodes on which apis-main and apis-dcdc\_batt\_comm run (Figure 2-1: IoT Boards (COP1 to COP4)), but the environment can be modified by editing the configuration file.

![](media/media/image1.png)  
Figure 2-1

<br>

# **3. Software Architecture**

The structure of the apis-build\_version\_up\_system folder is shown in Figure 3-1. The folders and files contained in the system folder are each explained in more detail in Section 4, “Folder and File Structure”.  
When the ‘make’ command is executed, the software is cloned from github/SonyCSL, built, and then installed on the various nodes.  
The ‘conf’ folder contains configuration files: installer.conf and cop-\*.xml. The APIS evaluation environment can be reconfigured by changing the settings in those files.

![](media/media/image2.png)  
Figure 3-1

<br>

# **4. Folder and File Structure**
    
## **4.1. Folders and files in the apis-build\_version\_up\_system folder**

The folders and files contained in the apis-build\_version\_up\_system folder are explained in the following table.

<table>
<tr class="even">
<td colspan="2">Makefile</td>
<td><p>
The Makefile for the apis-build_version_up_system.<br>
The Makefile targets used by main are described below.<br>
prepare: The following processing is executed.<br>
&emsp;11-prepare/main.sh<br />
&emsp;12-generate-target-list/main.sh<br />
&emsp;13-distribute-keys/main.sh<br />
install: The following processing is executed.。<br>
&emsp;21-install-apis/main.sh<br />
&emsp;22-install-dcdc_batt_comm/main.sh<br />
&emsp;23-install-main_controller/main.sh<br />
&emsp;24-install-emulator/main.sh<br />
start: The following processing is executed.<br>
&emsp;31-start/main.sh<br />
stop: The following processing is executed.<br>
&emsp;32-stop/main.sh<br />
shutdown: The following processing is executed.<br>
&emsp;91-shutdown/main.sh<br />
clean: The following processing is executed.<br>
&emsp;99-clean/main.sh</p></td>
<td></td>
</tr>
<tr class="odd">
<td rowspan="3">00-util</td>
<td>main.sh</td>
<td>1. Read conf/installer.conf.<br />
2. Specify the WORK_DIR, APIS_INSTALLER＿DIR address.<br />
3. Specify COP_XML as /conf/cop-*.xml.<br />
4. Use echo to output the values listed below to the log.<br />
&emsp;WORK_DIR<br />
&emsp;APIS_INSTALLER_DIR<br />
&emsp;COP_COMMUNITY<br />
&emsp;APIS_VERSION<br />
&emsp;COP_XML<br />
5. Run DO_MAIN.</td>
</tr>
<tr class="even">
<td>load_master_key.sh</td>
<td>Pass the secret key that is located under /key to ssh-agent.</td>
</tr>
<tr class="odd">
<td>loop_target.sh</td>
<td>Read /work/taret-list.txt and, if there are multiple COP nodes, return the processing required for that number of nodes.</td>
</tr>
<tr class="even">
<td rowspan="6">11-prepare</td>
<td>main.sh</td>
<td>
1. Run /00-util/main.sh and read the directory address and various cop-*.xml settings.<br />
2. Run 11-prepare/prepare-key.sh.<br />
3. Run 11-prepare/prepare-ApisInstaller.sh.<br />
4. Run 11-prepare/prepare-dcdc_batt_comm.sh.<br />
5. Run 11-prepare/prepare-main_controller.sh.<br />
6. Run 11-prepare/prepare-emulator.sh.</td>
</tr>
<tr class="odd">
<td>prepare-key.sh</td>
<td>1. Run /00-util/main.sh and read the directory address and the various cop-*.xml settings.<br />
2. Generate a key with ssh-keygen and save it under /key as the MASTER_KEY_NAME to be read by /00-util/main.sh.</td>
</tr>
<tr class="even">
<td>prepare-ApisInstaller.sh</td>
<td><p>
1. Run /00-util/main.sh and read the directory address and various cop-*.xml settings.<br />
2. cd APIS_INSTALLER_DIR. (move to /tool/ApisInstaller)<br />
3. Run ‘make prepare’ and then do the following.<br />
&emsp;3-1. Create log and work directories under /tool/ApisInstaller.<br />
&emsp;3-2. Check for the existence of /conf/cop-*.xml.<br />
&emsp;3-3. stopExp: Check for the existence of *-stop-*.exp for main, web, ccc, and log under ./exp.<br />
&emsp;3-4. killExp: Check for the existence of *-kill-*.exp for main, web, ccc, and log under ./exp.<br />
&emsp;3-5. stopKillExp: Check for the existence of *-stop-kill-*.exp for main, web, ccc, and log under ./exp.<br />
&emsp;3-6. versionupExp: Check for the existence of *-versionup-*.exp for main, web, ccc, and log under ./exp.<br />
&emsp;3-7. setupfilesExp: Check for the existence of *-setupfiles-*.exp for main, web, ccc, and log under ./exp.<br />
&emsp;3-8. keycertExp: Check for the existence of *-keycert-*.exp for main, web, ccc, and log under ./exp.<br>
&emsp;3-9. verifyExp: Check for the existence of *-verify-*.exp for main, web, ccc, and log under ./exp.<br />
&emsp;3-10. startExp: Check for the existence of *-start-*.exp for main, web, ccc, and log under ./exp.<br>
&emsp;3-11. retrievelogsExp: Check for the existence of *-retrievelogs-*.exp for main, web, ccc, and log under ./exp.<br />
&emsp;3-12. clearalarmExp: Check for the existence of *-clearalarm-*.exp for main, web, ccc, and log under ./exp.<br>
&emsp;3-13. Under /tool/ApisInstaller/work, run git clone apis-bom.git and then execute cd apis-bom and then make clean install.<br>
&emsp;3-14. Under /tool/ApisInstaller/work, run git clone apis-common.git and then execute cd apis-common and then make clean install.<br>
&emsp;3-15. Under /tool/ApisInstaller/work, run git clone apis-main.git and then execute cd apis-main and then make clean package.<br>
&emsp;3-16. Under /tool/ApisInstaller/work, run git clone apis-web.git and then execute cd apis-web and then make clean package.<br />
&emsp;3-17. Under /tool/ApisInstaller/work, run git clone apis-ccc.git and then execute cd apis-ccc and then make clean package.<br />
&emsp;3-18. Under /tool/ApisInstaller/work, run git clone apis-log.git and then execute cd apis-log and make clean package.<br>
&emsp;3-19. Move to /tool/CopInfoTransformer and then execute make clean package.</p></td>
</tr>
<tr class="odd">
<td>prepare-main_controller.sh</td>
<td>Execute git clone apis-main_controlller.git and copy apis-main_controller to /work.</td>
</tr>
<tr class="even">
<td>prepare-emulator.sh</td>
<td>Execute git clone apis-emulator.git and copy apis-emulator to /work.</td>
</tr>
<tr class="odd">
<td>prepare-dcdc_batt_comm.sh</td>
<td>Execute git clone apis-dcdc_batt_comm.git and copy apis-dcdc_batt_comm to /work.</td>
</tr>
<tr class="even">
<td rowspan="2">12-generate-target-list</td>
<td>main.sh</td>
<td><p>
1. Run /00-util/main.sh and read the directory address and the various cop-*.xml settings.<br />
2. Under /work, delete the target-list.txt file.<br />
3. Run groovy/12-generate-target-list/<br>
&emsp;generate-target-list.groovy.<br />
4. Under /work, create a target-list.txt file.</p></td>
</tr>
<tr class="odd">
<td>generate-target-list.groovy</td>
<td><p>Create a target-list.txt file from /conf/installer.conf and /conf/cop-*.xml.<br>
In the target-list.txt file, write the IP addresses, account names, and passwords of the target nodes (ZERO, FIRST, and COP).</p></td>
</tr>
<tr class="even">
<td rowspan="2">13-distribute-keys</td>
<td>main.sh</td>
<td><p>
1. Run /00-util/main.sh and read the directory address and the various cop-*.xml settings.<br>
2. DO_MAIN:<br>
&emsp;Run /00-util/load_master.sh and pass the secret key that is located under /key to ssh-agent.<br />
3. DO_WITH_MASTER_KEY:<br>
&emsp;Run /00-util/loop_target_key.sh and write the public key from the /work/target-list.txt file.<br>
&emsp;Obtain the node information<br>
4. DO_LOOP_TARGET_ZERO:<br>
&emsp;Write the public key to node ZERO.<br />
5. DO_LOOP_TARGET_FIRST:<br>
&emsp;Write the public key to node FIRST.<br />
6. DO_LOOP_TARGET_COP:<br>
&emsp;Write the public key to node COP.</p></td>
</tr>
<tr class="odd">
<td>copy-id.exp</td>
<td>Copy the public key that is located under /key to each node.</td>
</tr>
<tr class="even">
<td rowspan="2">21-install-apis</td>
<td>main.sh</td>
<td>
1. Run /00-util/main.sh and read the directory address and the various cop-*.xml settings.<br />
2. Run /00-util/load_master.sh and pass the secret key that is located under /key to ssh-agent.<br />
3. Run 21-install-apis/install-ApisInstaller.sh.</td>
</tr>
<tr class="odd">
<td><p>install-Apis</p>
<p>Installer.sh</p></td>
<td><p>
1. Run /00-util/main.sh and read the directory address and the various cop-*.xml settings.
2. Move to /tool/ApisInstaller and execute make cleanLog cleanDerived stop-kill versionup setupfiles keycert verify.<br>
&emsp;2-1. cleanLog: Move to /tool/ApisInstaller/log and run rm -rf *.log.<br>
&emsp;2-2. cleanDerived: Move to /tool/ApisInstaller/work and delete all files.<br />
&emsp;2-3. stop-kill: Use main-default.groovy and tool-default.groovy (argument: xxxStopKillExp) to kill the apis-main and apis-web, apis-ccc, and apis-log processes that are running on each node.<br>
&emsp;2-4. versionup: Use main-default.groovy and tool-default.groovy (argument: xxxSetupfilesExp) to copy the .jar files for apis-main, apis-web, apis-ccc, and apis-log to each node.<br>
&emsp;2-5. setupfiles: Use main-setupfiles.groovy and tool-setupfiles.groovy to copy the respective JSON files required by apis-main, apis-web, apis-ccc, and apis-log.<br />
&emsp;2-6. keycert: Use main-keycert.groovy and tool-keycert.groovy to generate the keys and certificates required for SSL protection of the event buses of apis-main, apis-web, and apis-ccc.</p></td>
</tr>
<tr class="even">
<td rowspan="4">22-install-dcdc_batt_comm</td>
<td>main.sh</td>
<td><p>
1. Run /00-util/main.sh and read the directory address and the various cop-*.xml settings.<br>
2. DO_MAIN: Run /00-util/load_master.sh and pass the secret key that is located under /key to ssh-agent.<br>
&emsp;Run /22-install-dcdc_batt_comm/01-package.sh.<br>
3. DO_WITH_MASTER_KEY:<br>
&emsp;Run /00-util/loop_target.sh and obtain the node information for writing the key from the /work/target-list.txt file.<br>
4. DO_LOOP_TARGET_COP:<br>
&emsp;Run /22-install-dcdc_batt_comm/02-install.exp.<br />
&emsp;Run /22-install-dcdc_batt_comm/03-build.exp.</p>
</blockquote></td>
</tr>
<tr class="odd">
<td>01-package.sh</td>
<td>Use tar.gz to compress the apis-dcdc_batt_comm folder.</td>
</tr>
<tr class="even">
<td>02-install.exp</td>
<td>Copy apis-dcdc_batt_comm.tar.gz to each COP node and expand the folder.</td>
</tr>
<tr class="odd">
<td>03-build.exp</td>
<td>Move to the /apis-dcdc_batt_comm folder of each COP node and run venv.sh.</td>
</tr>
<tr class="even">
<td rowspan="4">23-install-main_controller</td>
<td>main.sh</td>
<td><p>
1. Run /00-util/main.sh and read the directory address and the various cop-*.xml settings.<br>
2. DO_MAIN: Run /00-util/load_master.sh and pass the secret key that is located under /key to ssh-agent.<br>
&emsp;Run /23-install-main_controller/01-package.sh.<br>
3. DO_WITH_MASTER_KEY:<br>
&emsp;Run /00-util/loop_target.sh and obtain the node information for writing the key from the /work/target-list.txt file.<br>
4. DO_LOOP_TARGET_COP:<br>
&emsp;Run /23-install-main_controller/02-install.exp.<br />
&emsp;Run /23-install-main_controller/03-build.exp.</p></td>
</tr>
<tr class="odd">
<td>01-package.sh</td>
<td>Use tar.gz to compress the folder.</td>
</tr>
<tr class="even">
<td>02-install.exp</td>
<td>Copy apis-main_controller.tar.gz to the FIRST node and expand the folder.</td>
</tr>
<tr class="odd">
<td>03-build.exp</td>
<td>Move to the /apis-main_controller folder and run venv.sh.</td>
</tr>
<tr class="even">
<td rowspan="4">24-install-emulator</td>
<td>main.sh</td>
<td><p>
1. Run /00-util/main.sh and read the directory address and the various cop-*.xml settings.<br>
2. DO_MAIN: Run /00-util/load_master.sh and pass the secret key that is located under /key to ssh-agent.<br>
&emsp;Run /24-install-emulator/01-package.sh.<br>
3. DO_WITH_MASTER_KEY:<br>
&emsp;Run /00-util/loop_target.sh and obtain the node information for writing the key from the /work/target-list.txt file.<br>
4. DO_LOOP_TARGET_COP:<br>
&emsp;Run /24-install-emulator/02-install.exp.<br />
&emsp;Run /24-install-emulator/03-build.exp.</p></td>
</tr>
<tr class="odd">
<td>01-package.sh</td>
<td>Use tar.gz to compress the apis-emulator folder.</td>
</tr>
<tr class="even">
<td>02-install.exp</td>
<td>Copy the apis-emulator.tar.gz file to the ZERO node and expand the file.</td>
</tr>
<tr class="odd">
<td>03-build.exp</td>
<td>Move to the /apis-emulator folder of the ZERO node and run venv.sh.</td>
</tr>
<tr class="even">
<td rowspan="6">31-start</td>
<td>main.sh</td>
<td><p>
1. Run /00-util/main.sh and read the directory address and the various cop-*.xml settings.<br>
2. DO_MAIN: Run /00-util/load_master.sh and pass the secret key that is located under /key to ssh-agent.<br>
3. DO_WITH_MASTER_KEY: Run /00-util/loop_target.sh to obtain the node information for starting up the software.<br>
4. DO_LOOP_TARGET_ZERO: Run /31-start/start-emulator.exp.<br />
&emsp;Open the browser for apis-emulator.<br />
1. DO_LOOP_TARGET_FIRST: Run /31-start/start-main_controller.exp.<br />
&emsp;Open the browser for apis-main_controller.<br />
6. DO_LOOP_TARGET_COP: Run /31-start/start-dcdc_batt_comm.exp<br />
7. Run start-ApisInstaller.sh.</p></td>
</tr>
<tr class="odd">
<td><p>start-Apis</p>
<p>Installer.sh</p></td>
<td><p>
1. Run /00-util/main.sh and read the directory address and the various cop-*.xml settings.<br>
2. Execute cd APIS_INSTALLER_DIR (Move to /tool/ApisInstaller.)<br>
3．Execute make start and do the following.<br />
&emsp;3-1. Create log and work directories under /tool/ApisInstaller/.<br />
&emsp;3-2. Check for existence of /conf/cop-*.xml.<br />
&emsp;3-3. startExp: Check for existence of *-start-*.exp for main, web, ccc, and log under /exp/.<br />
&emsp;3-4. Run /tool/ApisInstaller/groovy main-default.groovy (argument: main-start-oss.exp) the required number of times.<br />
&emsp;3-5. Run /tool/ApisInstaller/groovy tools-default.groovy (argument: web-start-oss.exp).<br>
&emsp;3-6. Run /tool/ApisInstaller/groovy tools-default.groovy (argument: ccc-start-oss.exp).<br>
&emsp;3-7. Run /tool/ApisInstaller/groovy tools-default.groovy (log-start-oss.exp).</p></td>
</tr>
<tr class="even">
<td><p>start-main_</p>
<p>controller.exp</p></td>
<td>
1. Execute ssh login for this node.<br />
2. Execute cd apis-main_controller.<br />
3. Run sh stop.sh.<br />
4. Run .venv/bin/activate.<br />
5. Run ./startMain.py to start up apis-main_controller.</td>
</tr>
<tr class="odd">
<td>start-emulator.exp</td>
<td>
1. Execute ssh login for this node.<br />
2. Execute cd apis-emulator.<br />
3. Run sh stop.sh.<br />
4. Execute .venv/bin/activate.<br />
5. Run ./startEmul.py to start up the apis-emulator.</td>
</tr>
<tr class="even">
<td><p>start-dcdc_batt_</p>
<p>comm.exp</p></td>
<td>
1. Execute ssh login for this node.<br />
2. Execute cd apis-dcdc_batt_comm/drivers.<br />
3. Run sh stop.sh.<br />
4. Execute .venv/bin/activate.<br />
5.Run ./essx_server.py to start up apis-dcdc_batt_comm.</td>
</tr>
<tr class="odd">
<td><p>open_with_</p>
<p>browser.sh</p></td>
<td>Run the software in the browser.</td>
</tr>
<tr class="even">
<td rowspan="5">32-stop</td>
<td>main.sh</td>
<td><p>
1. Run /00-util/main.sh and read the directory address and the various cop-*.xml settings.<br>
2. DO_MAIN: Run /00-util/load_master.sh and pass the secret key that is located under /key to ssh-agent.<br>
3. DO_WITH_MASTER_KEY: Run /00-util/loop_target.sh to obtain the node information for stopping the software.<br>
4. DO_LOOP_TARGET_ZERO: Run /32-stop/stop-emulator.exp.<br>
5. DO_LOOP_TARGET_FIRST: Run /32-stop/stop-main_controller.exp.<br>
6. DO_LOOP_TARGET_COP: Run /31-stop/stop-dcdc_batt_comm.exp.<br>
7. Run stop-ApisInstaller.sh.</p></td>
</tr>
<tr class="odd">
<td><p>stop-Apis</p>
<p>Installer.sh</p></td>
<td><p>
1. Run /00-util/main.sh and read the directory address and the various cop-*.xml settings.<br>
2. Execute cd APIS_INSTALLER_DIR. (Move to /tool/ApisInstaller.)<br>
3．Execute make stop and do the following.<br>
&emsp;3-1. Create log and work directories under /tool/ApisInstaller/.<br />
&emsp;3-2. Check for existence of /conf/cop-*.xml.<br />
&emsp;3-3. stopExp Check for existence of *-stop-*.exp for main, web, ccc, and log under /exp/.<br />
&emsp;3-4. Run /tool/ApisInstaller/groovy main-default.groovy (argument: main-stop-oss.exp) the required number of times.<br />
&emsp;3-5. Run /tool/ApisInstaller/groovy tools-default.groovy (argument: web-stop-oss.exp).<br />
&emsp;3-6. Run /tool/ApisInstaller/groovy tools-default.groovy (argument: ccc-stop-oss.exp).<br />
&emsp;3-7. Run /tool/ApisInstaller/groovy tools-default.groovy (log-stop-oss.exp).</p>
</td>
</tr>
<tr class="even">
<td><p>stop-main_</p>
<p>controller.exp</p></td>
<td>
1. Execute ssh login for this node.<br />
2. Execute cd apis-main_controller.<br />
3. Run sh stop.sh.</td>
</tr>
<tr class="odd">
<td><p>stop-</p>
<p>emulator.exp</p></td>
<td>
1. Execute ssh login for this node.<br />
2. Execute cd apis-emulator.<br />
3. Run sh stop.sh.</td>
</tr>
<tr class="even">
<td>stop-dcdc_batt_comm.exp</td>
<td>
1. Execute ssh login for this node.<br />
2. Execute cd apis-dcdc_batt_comm/drivers.<br />
3. Run sh stop.sh.</td>
</tr>
<tr class="odd">
<td rowspan="2"><p>91-shutdown</p></td>
<td>main.sh</td>
<td><p>
1. Run /00-util/main.sh and read the directory address and the various cop-*.xml settings.<br />
2. DO_MAIN: Run /00-util/load_master_key.sh and pass the secret key that is located under /key to ssh-agent.<br />
3. DO_WITH_MASTER_KEY: Run /00-util/loop_target.sh to obtain the node information for stopping the software.<br />
4. DO_LOOP_TARGET_ZERO:<br>
&emsp;Run /91-shutdown/shutdown.exp.<br>
&emsp;(Shut down the OS on which apis-emulator runs.)<br />
5. DO_LOOP_TARGET_FIRST:<br>
Run /91-shutdown/shutdown.exp.<br>
&emsp;(Shut down the OS on which apis-main_emulator runs.)<br />
6. DO_LOOP_TARGET_COP:<br>
&emsp;Run /91-shutdown/shutdown.exp.<br>
&emsp;(Shut down the OS on which apis-main/web/ccc/log is running.)</p></td>
</tr>
<tr class="even">
<td>shutdown.exp</td>
<td>Perform ssh login and then execute sudo shutdown -h now.</td>
</tr>
<tr class="odd">
<td rowspan="3">99-clean</td>
<td>main.sh</td>
<td><p>
1. Run /00-util/main.sh and read the directory address and the various cop-*.xml settings.<br>
2. DO_MAIN:<br>
&emsp;Run /99-clean/clean-ApisInstaller.sh.<br>
3. DO_MAIN:<br>
&emsp;Run /99-clean/clean-Installer.sh.</p></td>
</tr>
<tr class="even">
<td>clean-ApisInstaller.sh</td>
<td>
1. Run /00-util/main.sh and read the directory address and the various cop-*.xml settings.<br />
2. Execute cd APIS_INSTALLER_DIR (move to /tool/ApisInstaller).<br />
3. Execute make clean and delete all of the files under /tool/ApisInstaller/work/ (excluding the apis-bom, apis-common, apis-main, apis-web, apis-ccc, and apis-log folders).</td>
</tr>
<tr class="odd">
<td>clean-installer.sh</td>
<td>
1. Run /00-util/main.sh and read the directory address and the various cop-*.xml settings.<br />
2. Execute cd APIS_INSTALLER_DIR (move to /work).<br />
3. Execute rm -f target-list.txt and rm -f *.tar.gz to delete all of the files under /work/ (excluding the apis-emulator, apis-main_controller, and apis-dcdc_batt_comm folders).</td>
</tr>
<tr class="even">
<td rowspan="2">conf</td>
<td>cop-*.xml</td>
<td>This file holds the information that is required to construct the APIS environment. That information is used to generate various JSON and script files. (For more information, refer to section 5, “The cop-*.xml file”.)</td>
</tr>
<tr class="odd">
<td>installer.conf</td>
<td>
This file describes the settings listed below.<br />
GIT_BASE_URL=https://github.com/SonyCSL<br />
ZERO_ADDRESS=192.168.0.100<br />
ZERO_USERNAME=oesunit<br />
ZERO_PASSWORD=oes<br />
COP_PASSWORD=oes<br />
MASTER_KEY_NAME=master-id_rsa<br />
INSTALLER_INTERFACE=en0<br />
WORK_DIR=work<br />
APIS_INSTALLER_DIR=tool/ApisInstaller<br />
COP_COMMUNITY=oss_oss<br />
APIS_VERSION=3.0.0<br />
COP_VERSION=20201201</td>
</tr>
<tr class="even">
<td rowspan="2">key</td>
<td>master-id_rsa</td>
<td>This is the secret key generated by 11-prepare/prepare-key.sh.</td>
</tr>
<tr class="odd">
<td>master-id_rsa.pub</td>
<td>This is the secret key generated by 11-prepare/prepare-key.sh.</td>
</tr>
</tbody>
</table>

<table>
<tbody>
<tr class="even">
<td rowspan="22">tool</th>
<td rowspan="18">ApisInstaller</td>
<td>Makefile</td>
<td>The Makefile for installing APIS-related software.</td>
</tr>
<tr class="odd">
<td>make.conf</td>
<td>A configuration that contains information required for software installation.</td>
</tr>
<tr class="even">
<td>progress_info.groovy</td>
<td>A groovy file for checking the progress of each process.</td>
</tr>
<tr class="odd">
<td>main-default.groovy</td>
<td><p>
A groovy file for executing the following expect files, which are interactive scripts.<br />
main-start-oss.exp,<br>
main-stop-oss.exp,<br />
main-kill-oss.exp,<br>
main-stop-kill-oss.exp,<br />
main-versionup-oss.exp,<br>
main-verify-oss.exp</p></td>
</tr>
<tr class="even">
<td>main-globaloperationmode.groovy</td>
<td>A groovy file that is executed by make suspend-all and make resume-all and can change the global operation mode of apis-main. (For more information, refer to the apis-main specifications document.)</td>
</tr>
<tr class="odd">
<td>main-keycert.groovy</td>
<td>A groovy file for executing the following expect file, which is an interactive script.<br />
main-keycert-oss.exp</td>
</tr>
<tr class="even">
<td>main-localoperationmode.groovy</td>
<td>A groovy file that is executed by make unlock and sets the global operation mode of apis-main to unspecified. (For more information, refer to the apis-main specifications document.)</td>
</tr>
<tr class="odd">
<td>main-retrievelogs.groovy</td>
<td>A groovy file for executing the following expect file, which is an interactive script.<br />
main-retrievelogs-oss.exp</td>
</tr>
<tr class="even">
<td>main-setupfiles.groovy</td>
<td>A groovy file for executing the following expect files, which are interactive scripts.<br />
main-setupfiles-oss.exp</td>
</tr>
<tr class="odd">
<td>tools-default.groovy</td>
<td><p>
A groovy file for executing the following expect files, which are interactive scripts.<br />
web-start-oss.exp,<br>
web-stop-oss.exp,<br />
web-kill-oss.exp,<br>
web-stop-kill-oss.exp,<br />
web-versionup-oss.exp,<br>
web-verify-oss.exp,<br />
ccc-start-oss.exp,<br>
ccc-stop-oss.exp,<br />
ccc-kill-oss.exp,<br>
ccc-stop-kill-oss.exp,<br />
ccc-versionup-oss.exp,<br>
ccc-verify-oss.exp,<br />
log-start-oss.exp,<br>
log-stop-oss.exp,<br />
log-kill-oss.exp,<br>
log-stop-kill-oss.exp,<br />
log-versionup-oss.exp,<br>
log-verify-oss.exp</p></td>
</tr>
<tr class="even">
<td>tools-keycert.groovy</td>
<td>A groovy file for executing the following expect files, which are interactive scripts.<br />
web-keycert-oss.exp,<br />
ccc-keycert-oss.exp</td>
</tr>
<tr class="odd">
<td>tools-retrievelogs.groovy</td>
<td>A groovy file for executing the following expect files, which are interactive scripts.<br />
web-retrievelogs-oss.exp,<br />
ccc-retrievelogs-oss.exp,<br />
log-retrievelogs-oss.exp</td>
</tr>
<tr class="even">
<td>tools-setupfiles.groovy</td>
<td>A groovy file for executing the following expect files, which are interactive scripts.<br />
web-retrievelogs-oss.exp,<br />
ccc-retrievelogs-oss.exp,<br />
log-retrievelogs-oss.exp</td>
</tr>
<tr class="odd">
<td>device-default.groovy</td>
<td>A groovy file for executing the following expect file, which is an interactive script.<br />
device-clearalarm-oss.exp</td>
</tr>
<tr class="even">
<td>zip.groovy</td>
<td>A groovy file used by make retrievelogs to compress the contents of the folder specified by -in and output the compressed file to the path specified by -out</td>
</tr>
<tr class="odd">
<td>exp</td>
<td>Folder for storing expect files (For more information, refer to the next table.)</td>
</tr>
<tr class="even">
<td>log</td>
<td>Folder for storing ApisInstaller logs</td>
</tr>
<tr class="odd">
<td>work</td>
<td>Work folder for ApisInstaller.</td>
</tr>
<tr class="even">
<td rowspan="4">CopInfoTransformer</td>
<td>Makefile</td>
<td>The Makefile for various JSON files created from cop-*.xml</td>
</tr>
<tr class="odd">
<td>cop-example.xml</td>
<td>A cop-*.xml sample file</td>
</tr>
<tr class="even">
<td>pom</td>
<td>The pom file used by Maven</td>
</tr>
<tr class="odd">
<td>src/main</td>
<td>The CopInfoTransformer source code</td>
</tr>
<tr class="even">
<td colspan="3">work</td>
<td>A work folder for saving git-cloned apis-main_controller, apis-emulator, and apis-dcdc_batt_comm files and compressed folders for sending to various nodes</td>
</tr>
</tbody>
</table>

<br>

The expect files (interactive scripts) that are stored in the apis-build\_version\_up\_system/tool/ApisInstaller/exp folder are explained in the following table.

<br>

|||
| ------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| main-keycert-oss.exp      | Executes openssl to generate an SSL key for the event bus of each COP node for ssh login.                                                                                                                 |
| main-kill-oss.exp         | Performs ssh login for each COP node and runs kill.sh for apis-main.                                                                                                                                      |
| main-retrievelogs-oss.exp | Performs ssh login for each COP node and uses scp to obtain the apis-main operation log and error log.                                                                                                    |
| main-setupfiles-oss.exp   | Performs ssh login for each COP node and uses scp to send start.sh, stop.sh, kill.sh, logging.properties, cluster.xml, config.json, hwConfig.json, scenario.json, and policy.json for apis-main.          |
| main-start-oss.exp        | Performs ssh login for each COP node and runs start.sh for apis-main.                                                                                                                                     |
| main-stop-oss.exp         | Performs ssh login for each COP node and runs stop.sh for apis-main.                                                                                                                                      |
| main-verify-oss.exp       | Performs ssh login for each COP node and runs verify.sh for apis-main.                                                                                                                                    |
| main-versionup-oss.exp    | Performs ssh login for each COP node, deletes the apis-main folder, sends apis-main.\*.tar.gz with scp, expands the file, and generates a symbolic link to the apis-main folder.                          |
| web-keycert-oss.exp       | Performs ssh login for the FIRST node and generates the keys and certificates required for SSL protection of the apis-web event bus.                                                                      |
| web-kill-oss.exp          | Performs ssh login for the FIRST node and runs kill.sh for apis-web.                                                                                                                                      |
| web-retrievelogs-oss.exp  | Performs ssh login for the FIRST node and uses scp to obtain the apis-web operation log and error log.                                                                                                    |
| web-setupfiles-oss.exp    | Performs ssh login for the FIRST node and uses scp to send start.sh, stop.sh, kill.sh, logging.properties, cluster.xml, config.json, hwConfig.json, scenario.json, and policy.json.apis-web for apis-web. |
| web-start-oss.exp         | Performs ssh login for the FIRST node and runs start.sh for apis-web.                                                                                                                                     |
| web-stop-oss.exp          | Performs ssh login for the FIRST node and runs stop.sh for apis-web.                                                                                                                                      |
| web-stop-kill-oss.exp     | Performs ssh login for the FIRST node and runs stop-kill.sh for apis-web.                                                                                                                                 |
| web-verify-oss.exp        | Performs ssh login for the FIRST node and runs verify.sh for apis-web.                                                                                                                                    |
| web-versionup-oss.exp     | Performs ssh login for the FIRST node, deletes the apis-web folder, sends apis-web.\*.tar.gz with scp, expands the file, and generates a symbolic link to the apis-web folder.                            |
| ccc-keycert-oss.exp       | Performs ssh login for the FIRST node and generates the keys and certificates required for SSL protection of the apis-ccc event bus.                                                                      |
| ccc-kill-oss.exp          | Performs ssh login for the FIRST node and runs kill.sh for apis-ccc.                                                                                                                                      |
| ccc-retrievelogs-oss.exp  | Performs ssh login for the FIRST node uses scp to obtain the apis-ccc operation log and error log.                                                                                                        |
| ccc-setupfiles-oss.exp    | Performs ssh login for the FIRST node and uses scp to send start.sh, stop.sh, kill.sh, logging.properties, cluster.xml, config.json, hwConfig.json, scenario.json, and policy.json.apis-web for apis-ccc. |
| ccc-start-oss.exp         | Performs ssh login for the FIRST node and runs start.sh for apis-ccc.                                                                                                                                     |
| ccc-stop-oss.exp          | Performs ssh login for the FIRST node and runs stop.sh for apis-ccc.                                                                                                                                      |
| ccc-stop-kill-oss.exp     | Performs ssh login for the FIRST node and runs stop-kill.sh for apis-ccc.                                                                                                                                 |
| ccc-verify-oss.exp        | Performs ssh login for the FIRST node and runs verify.sh for apis-ccc.                                                                                                                                    |
| ccc-versionup-oss.exp     | Performs ssh login for the FIRST node, deletes the apis-ccc folder, sends apis-ccc.\*.tar.gz with scp, expands the file, and generates a symbolic link to the apis-ccc folder.                            |
| log-kill-oss.exp          | Performs ssh login for the FIRST node and runs kill.sh for apis-log.                                                                                                                                      |
| log-retrievelogs-oss.exp  | Performs ssh login for the FIRST node and uses scp to obtain the apis-log operation log and error log.                                                                                                    |
| log-setupfiles-oss.exp    | Performs ssh login for the FIRST node and uses scp to send start.sh, stop.sh, kill.sh, logging.properties, cluster.xml, config.json, hwConfig.json, scenario.json, and policy.json.apis-web for apis-log. |
| log-start-oss.exp         | Performs ssh login for the FIRST node and runs start.sh for apis-log.                                                                                                                                     |
| log-stop-oss.exp          | Performs ssh login for the FIRST node and runs stop.sh for apis-log.                                                                                                                                      |
| log-stop-kill-oss.exp     | Performs ssh login for the FIRST node and runs stop-kill.sh for apis-log.                                                                                                                                 |
| log-verify-oss.exp        | Performs ssh login for the FIRST node and runs verify.sh for apis-log.                                                                                                                                    |
| log-versionup-oss.exp     | Performs ssh login for the FIRST node, deletes the apis-log folder, sends apis-log.\*.tar.gz with scp, expands the file, and generates a symbolic link to the apis-log folder.                            |
| device-clearalarm-oss.exp | Performs ssh login for each COP node and executes the command for clearing the DC/DC Converter (EZA2500) Heavy Alarm.                                                                                     |

<br>

## **4.2. Files generated by CopInfoTransformer**

Various files generated by CopInfoTransformer in the /tool/ApisInstaller/work folder are explained in the following table.

<table>
<tbody>
<tr class="even">
<td>&lt;unitId&gt;.main-config.json</td>
<td>The apis-main config.json file<br />
(For more information, refer to the apis-main specification document.)</td>
</tr>
<tr class="odd">
<td>&lt;unitId&gt;.main-hwConfig.json</td>
<td>The apis-main hwConfig.json file<br />
(For more information, refer to the apis-main specification document.)</td>
</tr>
<tr class="even">
<td>&lt;unitId&gt;.main-scenario.json</td>
<td>The apis-main scenario.json file<br />
(For more information, refer to the apis-main specification document.)</td>
</tr>
<tr class="odd">
<td>main-policy.json</td>
<td>The apis-main policy.json file<br />
(For more information, refer to the apis-main specification document.)</td>
</tr>
<tr class="even">
<td>&lt;unitId&gt;.main-cluster.xml.encrypted</td>
<td>The apis-main cluster.xml.encrypted file<br />
(For more information, refer to the apis-main specification document.)</td>
</tr>
<tr class="odd">
<td>main-logging.properties</td>
<td>The apis-main logging.properties file<br />
(For more information, refer to the apis-main specification document.)</td>
</tr>
<tr class="even">
<td>&lt;unitId&gt;.main-start.sh</td>
<td>The apis-main start.sh file<br />
(For more information, refer to the apis-main specification document.)</td>
</tr>
<tr class="odd">
<td>&lt;unitId&gt;.main-stop.sh</td>
<td>The apis-main stop.sh file<br />
(For more information, refer to the apis-main specification document.)</td>
</tr>
<tr class="even">
<td>&lt;unitId&gt;.main-kill.sh</td>
<td>The apis-main kill.sh file<br />
(For more information, refer to the apis-main specification document.)</td>
</tr>
<tr class="odd">
<td>web-config.json</td>
<td>The apis-web config.json file<br />
(For more information, refer to the apis-web specification document.)</td>
</tr>
<tr class="even">
<td>web-cluster.xml.encrypted</td>
<td>The apis-web cluster.xml.encrypted file<br />
(For more information, refer to the apis-web specification document.)</td>
</tr>
<tr class="odd">
<td>web-logging.properties</td>
<td>The apis-web logging.properties file<br />
(For more information, refer to the apis-web specification document.)</td>
</tr>
<tr class="even">
<td>web-start.sh</td>
<td>The apis-web start.sh file<br />
(For more information, refer to the apis-web specification document.)</td>
</tr>
<tr class="odd">
<td>web-stop.sh</td>
<td>The apis-web stop.sh file<br />
(For more information, refer to the apis-web specification document.)</td>
</tr>
<tr class="even">
<td>web-kill.sh</td>
<td>The apis-web kill.sh file<br />
(For more information, refer to the apis-web specification document.)</td>
</tr>
<tr class="odd">
<td>ccc-config.json</td>
<td>The apis-ccc config.json file<br />
(For more information, refer to the apis-ccc specification document.)</td>
</tr>
<tr class="even">
<td>ccc-cluster.xml.encrypted</td>
<td>The apis-ccc cluster.xml.encrypted file<br />
(For more information, refer to the apis-ccc specification document.)</td>
</tr>
<tr class="odd">
<td>ccc-logging.properties</td>
<td>The apis-ccc logging.properties file<br />
(For more information, refer to the apis-ccc specification document.)</td>
</tr>
<tr class="even">
<td>ccc-start.sh</td>
<td>The apis-ccc start.sh file<br />
(For more information, refer to the apis-ccc specification document.)</td>
</tr>
<tr class="odd">
<td>ccc-stop.sh</td>
<td>The apis-ccc stop.sh file<br />
(For more information, refer to the apis-ccc specification document.)</td>
</tr>
<tr class="even">
<td>ccc-kill.sh</td>
<td>The apis-ccc kill.sh file<br />
(For more information, refer to the apis-ccc specification document.)</td>
</tr>
<tr class="odd">
<td>log-config.json</td>
<td>The apis-log config.json file<br />
(For more information, refer to the apis-log specification document.)</td>
</tr>
<tr class="even">
<td>log-logging.properties</td>
<td>The apis-log logging.properties file<br />
(For more information, refer to the apis-log specification document.)</td>
</tr>
<tr class="odd">
<td>log-start.sh</td>
<td>The apis-log start.sh file<br />
(For more information, refer to the apis-log specification document.)</td>
</tr>
<tr class="even">
<td>log-stop.sh</td>
<td>The apis-log stop.sh file<br />
(For more information, refer to the apis-log specification document.)</td>
</tr>
<tr class="odd">
<td>log-kill.sh</td>
<td>The apis-log kill.sh file<br />
(For more information, refer to the apis-log specification document.)</td>
</tr>
</tbody>
</table>

<br>

## **4.3. Log files generated during program execution**

The log files that are generated under /tool/ApisInstaller/log when apis-main, apis-web, apis-ccc, and apis-log are installed are explained in the following table.

<table>
<tbody>
<tr class="odd">
<td>&lt;order&gt;-&lt;unitId&gt;-main-stop-kill-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to &lt;unitId&gt; node is performed and the stop-kill.sh script for apis-main is run.</p>
<p>&lt;order&gt; is incremented from 100 according to the number of nodes.</p></td>
</tr>
<tr class="even">
<td>&lt;order&gt;-&lt;unitId&gt;-main-versionup-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to &lt;unitId&gt; node is performed, the apis-main folder is deleted, the apis-main.*.tar.gz file is sent with scp and expanded, and a symbolic link to the apis-main folder is generated.</p>
<p>&lt;order&gt; is incremented by from 200 according to the number of nodes.</p></td>
</tr>
<tr class="odd">
<td>&lt;order&gt;-&lt;unitId&gt;-main-setupfiles-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to &lt;unitId&gt; node is performed and start.sh, stop.sh, kill.sh, logging.properties, cluster.xml, config.json, hwConfig.json, scenario.json, and policy.json for apis-main are sent with scp.</p>
<p>&lt;order&gt; is incremented from 300 according to the number of nodes.</p></td>
</tr>
<tr class="even">
<td>&lt;order&gt;-&lt;unitId&gt;-main-keycert-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to &lt;unitId&gt; node is performed and openssl is used to generate the key used to encrypt the apis-main shared memory.</p>
<p>&lt;order&gt; is incremented from 400 according to the number of nodes.</p></td>
</tr>
<tr class="odd">
<td>&lt;order&gt;-&lt;unitId&gt;-main-verify.log</td>
<td><p>A log that is output when ssh login to &lt;unitId&gt; node is performed and the verify.sh script for apis-main is run.</p>
<p>&lt;order&gt; is incremented from 500 according to the number of nodes.</p></td>
</tr>
<tr class="even">
<td>&lt;order&gt;-web-stop-kill-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to the FIRST node on which apis-web is running is performed and the stop-kill.sh script for apis-web is run.</p>
<p>&lt;order&gt;=100</p></td>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&lt;order&gt;-web-versionup-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to the FIRST node on which apis-web is running is performed, the apis-web folder is deleted, the apis-web.*.tar.gz file is sent with scp and expanded, and a symbolic link to the apis-web folder is generated.</p>
<p>&lt;order&gt;=200</p></td>
</tr>
<tr class="even">
<td>&lt;order&gt;-web-setupfiles-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to the FIRST node on which apis-web is running is performed and start.sh, stop.sh, kill.sh, logging.properties, cluster.xml, config.json, hwConfig.json, scenario.json, and policy.json for apis-web are sent with scp.</p>
<p>&lt;order&gt;=300</p></td>
</tr>
<tr class="odd">
<td>&lt;order&gt;-web-keycert-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to the FIRST node on which apis-web is running is performed openssl is used to generate the key used to encrypt the apis-web shared memory.</p>
<p>&lt;order&gt;=400</p></td>
</tr>
<tr class="even">
<td>&lt;order&gt;-web-verify-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to the FIRST node on which apis-web is running is performed and the verify.sh script for apis-web is run.</p>
<p>&lt;order&gt;=500</p></td>
</tr>
<tr class="odd">
<td>&lt;order&gt;-ccc-stop-kill-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to the FIRST node on which apis-ccc is running is performed and the stop-kill.sh script for apis-ccc is run.</p>
<p>&lt;order&gt;=100</p></td>
</tr>
<tr class="even">
<td>&lt;order&gt;-ccc-versionup-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to the FIRST node on which apis-ccc is running is performed, the apis-ccc folder is deleted, the apis-ccc.*.tar.gz file is sent with scp and expanded, and a symbolic link to the apis-ccc folder is generated.</p>
<p>&lt;order&gt;=200</p></td>
</tr>
<tr class="odd">
<td>&lt;order&gt;-ccc-setupfiles-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to the FIRST node on which apis-ccc is running is performed and start.sh, stop.sh, kill.sh, logging.properties, cluster.xml, config.json, hwConfig.json, scenario.json, and policy.json for apis-ccc are sent with scp.</p>
<p>&lt;order&gt;=300</p></td>
</tr>
<tr class="even">
<td>&lt;order&gt;-ccc-keycert-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to the FIRST node on which apis-ccc is running is performed openssl is used to generate the key used to encrypt the apis-ccc shared memory.</p>
<p>&lt;order&gt;=400</p></td>
</tr>
<tr class="odd">
<td>&lt;order&gt;-ccc-verify-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to the FIRST node on which apis-ccc is running is performed and the verify.sh script for apis-ccc is run.</p>
<p>&lt;order&gt;=500</p></td>
</tr>
<tr class="even">
<td>&lt;order&gt;-log-stop-kill-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to the FIRST node on which apis-log is running is performed and the stop-kill.sh script for apis-log is run.</p>
<p>&lt;order&gt;=100</p></td>
</tr>
<tr class="odd">
<td>&lt;order&gt;-log-versionup-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to the FIRST node on which apis-log is running is performed, the apis-log folder is deleted, the apis-log.*.tar.gz file is sent with scp and expanded, and a symbolic link to the apis-log folder is generated.</p>
<p>&lt;order&gt;=200</p></td>
</tr>
<tr class="even">
<td>&lt;order&gt;-log-setupfiles-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to the FIRST node on which apis-log is running is performed and start.sh, stop.sh, kill.sh, logging.properties, cluster.xml, config.json, hwConfig.json, scenario.json, and policy.json for apis-log are sent with scp.</p>
<p>&lt;order&gt;=300</p></td>
</tr>
<tr class="odd">
<td>&lt;order&gt;-log-verify-oss-err/-out.log</td>
<td><p>A log that is output when ssh login to the FIRST node on which apis-log is running is performed and the verify.sh script for apis-log is run.</p>
<p>&lt;order&gt;=500</p></td>
</tr>
</tbody>
</table>

<br>

# **5. Configuration Files**
    
## **5.1. cop-\*.xml Files**

The /conf/cop-\*.xml files contain the information that serves as the basis for the settings described in the various files for apis-main, apis-web, apis-ccc, and apis-log (JSON files, shell scripts, cluster.xml, etc.).

CopInfoTransformer can be used to extract the required information from cop-\*.xml files and generate various files. The various cop-\*.xml settings are explained in the following table. (For more information, refer to the apis-main specifications and other relevant documents.)

To add one IoT board to a COP node that is running apis-main or other such program, copy the information between the \<cop\> and \</cop\> tags found between \<copList\> and \</copList\> tags and add the information.

<table>
<thead>
<tr class="header">
<th>&lt;communityId&gt;</th>
<th>The communityId setting in the apis-main config.json file</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>&lt;cluster&gt;&lt;clusterId&gt;</td>
<td>The clusterId setting in the apis-main config.json file</td>
</tr>
<tr class="even">
<td>&lt;disabledItems&gt;&lt;disableItem&gt;</td>
<td><p>Specifies which of the following programs are not to be installed.</p>
<p>&emsp;apis-main</p>
<p>&emsp;apis-log</p>
<p>&emsp;apis-ccc</p>
<p>&emsp;apis-log</p></td>
</tr>
<tr class="odd">
<td>&lt;cluster&gt;&lt;clusterId&gt;</td>
<td>The communityId setting in the apis-main config.json file</td>
</tr>
<tr class="even">
<td>&lt;cluster&gt;&lt;security&gt;&lt;enabled&gt;</td>
<td>Specifies whether or not the event bus is to be SSL-protected and encryption is performed for shared memory</td>
</tr>
<tr class="odd">
<td><p>&lt;cluster&gt;&lt;security&gt;&lt;cert&gt;</p>
<p>&lt;countryName&gt;</p></td>
<td>The countryName information that is needed for openssl generation of the key.pem and cert.pem required for SSL protection of the event bus</td>
</tr>
<tr class="even">
<td><p>&lt;cluster&gt;&lt;security&gt;&lt;cert&gt;</p>
<p>&lt;stateOrProvinceName&gt;</p></td>
<td>The stateOrProvinceName information that is needed for openssl generation of the key.pem and cert.pem required for SSL protection of the event bus</td>
</tr>
<tr class="odd">
<td><p>&lt;cluster&gt;&lt;security&gt;&lt;cert&gt;</p>
<p>&lt;localityName&gt;</p></td>
<td>The localityName information that is needed for openssl generation of the key.pem and cert.pem required for SSL protection of the event bus</td>
</tr>
<tr class="even">
<td><p>&lt;cluster&gt;&lt;security&gt;&lt;cert&gt;</p>
<p>&lt;organizationName</p></td>
<td>The organizationName information that is needed for openssl generation of the key.pem and cert.pem required for SSL protection of the event bus</td>
</tr>
<tr class="odd">
<td><p>&lt;cluster&gt;&lt;security&gt;&lt;cert&gt;</p>
<p>&lt;organizationalUnitName&gt;</p></td>
<td>The organizationalUnitName information that is needed for openssl generation of the key.pem and cert.pem required for SSL protection of the event bus</td>
</tr>
<tr class="even">
<td><p>&lt;cluster&gt;&lt;security&gt;&lt;cert&gt;</p>
<p>&lt;commonName&gt;</p></td>
<td>The commonName information that is needed for openssl generation of the key.pem and cert.pem required for SSL protection of the event bus</td>
</tr>
<tr class="odd">
<td>&lt;cluster&gt;&lt;security&gt;&lt;cert&gt; &lt;emailAddress&gt;</td>
<td>The emailAddress information that is needed for openssl generation of the key.pem and cert.pem required for SSL protection of the event bus</td>
</tr>
<tr class="even">
<td><p>&lt;cluster&gt;&lt;hazelcast&gt;&lt;group&gt;</p>
<p>&lt;name&gt;</p></td>
<td>The cluster.xml file /hazelcast/group/name setting</td>
</tr>
<tr class="odd">
<td><p>&lt;cluster&gt;&lt;hazelcast&gt;&lt;group&gt;</p>
<p>&lt;password&gt;</p></td>
<td>The cluster.xml file/hazelcast/group/password setting</td>
</tr>
<tr class="even">
<td><p>&lt;cluster&gt;&lt;hazelcast&gt;&lt;network&gt;</p>
<p>&lt;join&gt;&lt;multicast&gt;&lt;enabled&gt;</p></td>
<td>The cluster.xml file /hazelcast/network/join/multicast/@enabled setting</td>
</tr>
<tr class="odd">
<td><p>&lt;cluster&gt;&lt;hazelcast&gt;&lt;network&gt;</p>
<p>&lt;join&gt;&lt;multicast&gt;</p>
<p>&lt;multicast-group&gt;</p></td>
<td><p>The cluster.xml file /hazelcast/network/join/multicast/</p>
<p>multicast-group setting</p>
<p>(Ex.: IPv4: 224.2.2.3, IPv6: FF02:0:0:0:0:0:0:1)</p></td>
</tr>
<tr class="even">
<td><p>&lt;cluster&gt;&lt;hazelcast&gt;&lt;network&gt;</p>
<p>&lt;join&gt;&lt;multicast&gt;</p>
<p>&lt;multicast-port&gt;</p></td>
<td><p>The cluster.xml file /hazelcast/network/join/multicast/</p>
<p>multicast-port setting</p></td>
</tr>
<tr class="odd">
<td><p>&lt;cluster&gt;&lt;hazelcast&gt;&lt;network&gt;</p>
<p>&lt;join&gt;&lt;tcp-ip&gt;&lt;enabled&gt;</p></td>
<td><p>The cluster.xml file /hazelcast/network/join/</p>
<p>tcp-ip/enable setting</p></td>
</tr>
<tr class="even">
<td><p>&lt;cluster&gt;&lt;hazelcast&gt;&lt;network&gt;</p>
<p>&lt;join&gt;&lt;tcp-ip&gt;&lt;member&gt;</p></td>
<td><p>The cluster.xml file /hazelcast/network/join/</p>
<p>tcp-ip/member setting</p></td>
</tr>
<tr class="odd">
<td>&lt;systemType&gt;</td>
<td>The apis-main config.json file systemType setting</td>
</tr>
<tr class="even">
<td>&lt;stateFileFormat&gt;</td>
<td>The apis-main config.json file stateFileFormat setting</td>
</tr>
<tr class="odd">
<td>&lt;dealLogDirformat&gt;</td>
<td>The apis-main config.json file dealLogDirformat setting</td>
</tr>
<tr class="even">
<td><p>&lt;fileSystemExclusive</p>
<p>LockFileFormat&gt;</p></td>
<td>The apis-main config.json file fileSystemExclusiveLockFileFormat setting</td>
</tr>
<tr class="odd">
<td><p>&lt;connection&gt;&lt;emulator&gt;</p>
<p>&lt;host&gt;</p></td>
<td>The apis-main config.json file connection.emulator.host setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;emulator&gt;</p>
<p>&lt;port&gt;</p></td>
<td>The apis-main config.json file connection.emulator.port setting</td>
</tr>
<tr class="odd">
<td><p>&lt;connection&gt;&lt;dcdc_controller&gt;</p>
<p>&lt;host&gt;</p></td>
<td>The apis-main config.json file connection.dcdc_controller.host setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;dcdc_controller&gt;</p>
<p>&lt;port&gt;</p></td>
<td>The apis-main config.json file connection.dcdc_controller.port setting</td>
</tr>
<tr class="odd">
<td><p>&lt;connection&gt;&lt;emu_driver&gt;</p>
<p>&lt;host&gt;</p></td>
<td>The apis-main config.json file connection.emu_driver.host setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;emu_driver&gt;</p>
<p>&lt;port&gt;</p></td>
<td>The apis-main config.json file connection.emu_driver.port setting</td>
</tr>
<tr class="odd">
<td><p>&lt;connection&gt;&lt;dealReporting&gt;</p>
<p>&lt;periodMsec&gt;</p></td>
<td>The apis-ccc config.json file dealReporting.periodMsec setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;dealReporting&gt;</p>
<p>&lt;host&gt;</p></td>
<td>The apis-ccc config.json file dealReporting.host setting</td>
</tr>
<tr class="odd">
<td><p>&lt;connection&gt;&lt;dealReporting&gt;</p>
<p>&lt;port&gt;</p></td>
<td>The apis-ccc config.json file dealReporting.port setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;dealReporting&gt;</p>
<p>&lt;ssl&gt;</p></td>
<td>The apis-ccc config.json file dealReporting.ssl setting</td>
</tr>
<tr class="odd">
<td><p>&lt;connection&gt;&lt;dealReporting&gt;</p>
<p>&lt;uri&gt;</p></td>
<td>The apis-ccc config.json file dealReporting.uri setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;dealReporting&gt;</p>
<p>&lt;requestTimeoutMsec&gt;</p></td>
<td>The apis-ccc config.json file dealReporting.requestTimeoutMsec setting</td>
</tr>
<tr class="odd">
<td><p>&lt;connection&gt;&lt;unitDataReporting&gt;</p>
<p>&lt;periodMsec&gt;</p></td>
<td>The apis-ccc config.json file unitDataReporting.periodMsec setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;unitDataReporting&gt;</p>
<p>&lt;host&gt;</p></td>
<td>The apis-ccc config.json file unitDataReporting.host setting</td>
</tr>
<tr class="odd">
<td><p>&lt;connection&gt;&lt;unitDataReporting&gt;</p>
<p>&lt;port&gt;</p></td>
<td>The apis-ccc config.json file unitDataReporting.port setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;unitDataReporting&gt;</p>
<p>&lt;ssl&gt;</p></td>
<td>The apis-ccc config.json file unitDataReporting.ssl setting</td>
</tr>
<tr class="odd">
<td><p>&lt;connection&gt;&lt;unitDataReporting&gt;</p>
<p>&lt;uri&gt;</p></td>
<td>The apis-ccc config.json file unitDataReporting.uri setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;unitDataReporting&gt;</p>
<p>&lt;requestTimeoutMsec&gt;</p></td>
<td>The apis-ccc config.json file unitDataReporting.requestTimeoutMsec setting</td>
</tr>
<tr class="odd">
<td><p>&lt;connection&gt;&lt;scenarioAcquisition&gt;</p>
<p>&lt;host&gt;</p></td>
<td>The apis-ccc config.json file senarioAcquisition.host setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;scenarioAcquisition&gt;</p>
<p>&lt;port&gt;</p></td>
<td>The apis-ccc config.json file senarioAcquisition.port setting</td>
</tr>
<tr class="odd">
<td><p>&lt;connection&gt;&lt;scenarioAcquisition&gt;</p>
<p>&lt;ssl&gt;</p></td>
<td>The apis-ccc config.json file senarioAcquisition.ssl setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;scenarioAcquisition&gt;</p>
<p>&lt;uri&gt;</p></td>
<td>The apis-ccc config.json file senarioAcquisition.uri setting</td>
</tr>
<tr class="odd">
<td><p>&lt;connection&gt;&lt;scenarioAcquisition&gt;</p>
<p>&lt;requestTimeoutMsec&gt;</p></td>
<td>The apis-ccc config.json file senarioAcquisition.requestTimeoutMsec setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;policyAcquisition&gt;</p>
<p>&lt;host&gt;</p></td>
<td>The apis-ccc config.json file policyAcquisition.host setting</td>
</tr>
<tr class="odd">
<td><p>&lt;connection&gt;&lt;policyAcquisition&gt;</p>
<p>&lt;port&gt;</p></td>
<td>The apis-ccc config.json file policyAcquisition.port setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;policyAcquisition&gt;</p>
<p>&lt;ssl&gt;</p></td>
<td>The apis-ccc config.json file policyAcquisition.ssl setting</td>
</tr>
<tr class="odd">
<td><p>&lt;connection&gt;&lt;policyAcquisition&gt;</p>
<p>&lt;uri&gt;</p></td>
<td>The apis-ccc config.json file policyAcquisition.uri setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;policyAcquisition&gt;</p>
<p>&lt;requestTimeoutMsec&gt;</p></td>
<td>The apis-ccc config.json file policyAcquisition.requestTimeoutMsec setting</td>
</tr>
<tr class="odd">
<td><p>&lt;connection&gt;&lt;budoEmulator&gt;</p>
<p>&lt;port&gt;</p></td>
<td>The apis-web config.json file budoEmulator.port setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;emulatorEmulator&gt;</p>
<p>&lt;port&gt;</p></td>
<td>The apis-web config.json file emulatorEmulator.port setting</td>
</tr>
<tr class="odd">
<td>&lt;connection&gt;&lt;apiServer&gt;&lt;port&gt;</td>
<td>The apis-web config.json file apiServer.port setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;watchdog&gt;</p>
<p>&lt;periodMsec&gt;</p></td>
<td>The apis-main, apis-web, apis-ccc, and apis-log config.json file watchdog.periodMsec setting</td>
</tr>
<tr class="odd">
<td>&lt;connection&gt;&lt;watchdog&gt;&lt;host&gt;</td>
<td>The apis-main, apis-web, apis-ccc, and apis-log config.json file watchdog.host setting</td>
</tr>
<tr class="even">
<td>&lt;connection&gt;&lt;watchdog&gt;&lt;port&gt;</td>
<td>The apis-main, apis-web, apis-ccc, and apis-log config.json file watchdog.port setting</td>
</tr>
<tr class="odd">
<td>&lt;connection&gt;&lt;watchdog&gt;&lt;uri&gt;</td>
<td>The apis-main, apis-web, apis-ccc, and apis-log config.json file watchdog.uri setting</td>
</tr>
<tr class="even">
<td><p>&lt;connection&gt;&lt;watchdog&gt;</p>
<p>&lt;requestTimeoutMsec&gt;</p></td>
<td>The apis-main, apis-web, apis-ccc, and apis-log config.json file watchdog.requestTimeoutMsec setting</td>
</tr>
<tr class="odd">
<td>&lt;start&gt;&lt;apis-main&gt;&lt;jvmOption&gt;</td>
<td>Java start-up argument settings in the start.sh file for apis-main</td>
</tr>
<tr class="even">
<td>&lt;start&gt;&lt;apis-main&gt;&lt;vertxOption&gt;</td>
<td>Java start-up argument settings in the start.sh file for apis-main</td>
</tr>
<tr class="odd">
<td>&lt;start&gt;&lt;apis-web&gt;&lt;jvmOption&gt;</td>
<td>Java start-up argument settings in the start.sh file for apis-web</td>
</tr>
<tr class="even">
<td>&lt;start&gt;&lt;apis-web&gt;&lt;vertxOption&gt;</td>
<td>Java start-up argument settings in the start.sh file for apis-web</td>
</tr>
<tr class="odd">
<td>&lt;start&gt;&lt;apis-ccc&gt;&lt;jvmOption&gt;</td>
<td>Java start-up argument settings in the start.sh file for apis-ccc</td>
</tr>
<tr class="even">
<td>&lt;start&gt;&lt;apis-ccc&gt;&lt;vertxOption&gt;</td>
<td>Java start-up argument settings in the start.sh file for apis-ccc</td>
</tr>
<tr class="odd">
<td>&lt;start&gt;&lt;apis-log&gt;&lt;jvmOption&gt;</td>
<td>Java start-up argument settings in the start.sh file for apis-log</td>
</tr>
<tr class="even">
<td>&lt;start&gt;&lt;apis-log&gt;&lt;vertxOption&gt;</td>
<td>Java start-up argument settings in the start.sh file for apis-log</td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-main&gt;&lt;console&gt;</p>
<p>&lt;level&gt;</p></td>
<td>The apis-main logging.properties file java.util.logging.ConsoleHandler.level setting</td>
</tr>
<tr class="even">
<td><p>&lt;logging&gt;&lt;apis-main&gt;&lt;file&gt;</p>
<p>&lt;level&gt;</p></td>
<td>The apis-main logging.properties file java.util.logging.FileHandler.level setting</td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-main&gt;&lt;file&gt;</p>
<p>&lt;limit&gt;</p></td>
<td>The apis-main logging.properties file java.util.logging.FileHandler.limit setting</td>
</tr>
<tr class="even">
<td><p>&lt;logging&gt;&lt;apis-main&gt;&lt;file&gt;</p>
<p>&lt;count&gt;</p></td>
<td>The apis-main logging.properties file java.util.logging.FileHandler.count setting</td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-main&gt;</p>
<p>&lt;anotherFile&gt;&lt;level&gt;</p></td>
<td><p>The apis-main logging.properties file jp.co.sony.csl.dcoes.apis.common.util.AnotherFileHandler.level setting</p></td>
</tr>
<tr class="even">
<td><p>&lt;logging&gt;&lt;apis-main&gt;</p>
<p>&lt;anotherFile&gt;&lt;limit&gt;</p></td>
<td><p>The apis-main logging.properties file jp.co.sony.csl.dcoes.apis.common.util.AnotherFileHandler.limit setting</p></td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-main&gt;</p>
<p>&lt;anotherFile&gt;&lt;count&gt;</p></td>
<td><p>The apis-main logging.properties file jp.co.sony.csl.dcoes.apis.common.util.AnotherFileHandler.count setting</p></td>
</tr>
<tr class="even">
<td><p>&lt;logging&gt;&lt;apis-main&gt;</p>
<p>&lt;multicast&gt;&lt;level&gt;</p></td>
<td><p>The apis-main logging.properties file jp.co.sony.csl.dcoes.apis.common.util.MulticastHandler.level setting</p></td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-web&gt;&lt;console&gt;</p>
<p>&lt;level&gt;</p></td>
<td>The apis-web logging.properties file java.util.logging.ConsoleHandler.level setting</td>
</tr>
<tr class="even">
<td><p>&lt;logging&gt;&lt;apis-web&gt;&lt;file&gt;</p>
<p>&lt;level&gt;</p></td>
<td>The apis-web logging.properties file java.util.logging.FileHandler.level setting</td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-web&gt;&lt;file&gt;</p>
<p>&lt;limit&gt;</p></td>
<td>The apis-web logging.properties file java.util.logging.FileHandler.limit setting</td>
</tr>
<tr class="even">
<td><p>&lt;logging&gt;&lt;apis-web&gt;&lt;file&gt;</p>
<p>&lt;count&gt;</p></td>
<td>The apis-web logging.properties file java.util.logging.FileHandler.count setting</td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-web&gt;</p>
<p>&lt;anotherFile&gt;&lt;level&gt;</p></td>
<td><p>The apis-web logging.properties file jp.co.sony.csl.dcoes.apis.common.util.AnotherFileHandler.level setting</p></td>
</tr>
<tr class="even">
<td><p>&lt;logging&gt;&lt;apis-web&gt;</p>
<p>&lt;anotherFile&gt;&lt;limit&gt;</p></td>
<td><p>The apis-web logging.properties file jp.co.sony.csl.dcoes.apis.common.util.AnotherFileHandler.limit setting</p></td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-web&gt;</p>
<p>&lt;anotherFile&gt;&lt;count&gt;</p></td>
<td><p>The apis-web logging.properties file jp.co.sony.csl.dcoes.apis.common.util.AnotherFileHandler.count setting</p></td>
</tr>
<tr class="even">
<td><p>&lt;logging&gt;&lt;apis-web&gt;</p>
<p>&lt;multicast&gt;&lt;level&gt;</p></td>
<td><p>The apis-web logging.properties file jp.co.sony.csl.dcoes.apis.common.util.MulticastHandler.level setting</p></td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-ccc&gt;&lt;console&gt;</p>
<p>&lt;level&gt;</p></td>
<td>The apis-ccc logging.properties file java.util.logging.ConsoleHandler.level setting</td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-ccc&gt;&lt;file&gt;</p>
<p>&lt;level&gt;</p></td>
<td>The apis-ccc logging.properties file java.util.logging.FileHandler.level setting</td>
</tr>
<tr class="even">
<td><p>&lt;logging&gt;&lt;apis-ccc&gt;&lt;file&gt;</p>
<p>&lt;limit&gt;</p></td>
<td>The apis-ccc logging.properties file java.util.logging.FileHandler.limit setting</td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-ccc&gt;&lt;file&gt;</p>
<p>&lt;count&gt;</p></td>
<td>The apis-ccc logging.properties file java.util.logging.FileHandler.count setting</td>
</tr>
<tr class="even">
<td><p>&lt;logging&gt;&lt;apis-ccc&gt;</p>
<p>&lt;anotherFile&gt;&lt;level&gt;</p></td>
<td><p>The apis-ccc logging.properties file jp.co.sony.csl.dcoes.apis.common.util.AnotherFileHandler.level setting</p></td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-ccc&gt;</p>
<p>&lt;anotherFile&gt;&lt;limit&gt;</p></td>
<td><p>The apis-ccc logging.properties file jp.co.sony.csl.dcoes.apis.common.util.AnotherFileHandler.limit setting</p></td>
</tr>
<tr class="even">
<td><p>&lt;logging&gt;&lt;apis-ccc&gt;</p>
<p>&lt;anotherFile&gt;&lt;count&gt;</p></td>
<td><p>The apis-ccc logging.properties file jp.co.sony.csl.dcoes.apis.common.util.AnotherFileHandler.count setting</p></td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-ccc&gt;</p>
<p>&lt;multicast&gt;&lt;level&gt;</p></td>
<td><p>The apis-ccc logging.properties file jp.co.sony.csl.dcoes.apis.common.util.MulticastHandler.level setting</p></td>
</tr>
<tr class="even">
<td><p>&lt;logging&gt;&lt;apis-log&gt;&lt;console&gt;</p>
<p>&lt;level&gt;</p></td>
<td>The apis-log logging.properties file java.util.logging.ConsoleHandler.level setting</td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-log&gt;&lt;file&gt;</p>
<p>&lt;level&gt;</p></td>
<td>The apis-log logging.properties file java.util.logging.FileHandler.level setting</td>
</tr>
<tr class="even">
<td><p>&lt;logging&gt;&lt;apis-log&gt;&lt;file&gt;</p>
<p>&lt;limit&gt;</p></td>
<td>The apis-log logging.properties file java.util.logging.FileHandler.limit setting</td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-log&gt;&lt;file&gt;</p>
<p>&lt;count&gt;</p></td>
<td>The apis-log logging.properties file java.util.logging.FileHandler.count setting</td>
</tr>
<tr class="header">
<td><p>&lt;logging&gt;&lt;apis-log&gt;</p>
<p>&lt;anotherFile&gt;&lt;level&gt;</p></td>
<td><p>The apis-log logging.properties file jp.co.sony.csl.dcoes.apis.common.util.AnotherFileHandler.level setting</p></td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-log&gt;</p>
<p>&lt;anotherFile&gt;&lt;limit&gt;</p></td>
<td><p>The apis-log logging.properties file jp.co.sony.csl.dcoes.apis.common.util.AnotherFileHandler.limit setting</p></td>
</tr>
<tr class="even">
<td><p>&lt;logging&gt;&lt;apis-log&gt;</p>
<p>&lt;anotherFile&gt;&lt;count&gt;</p></td>
<td><p>The apis-log logging.properties file jp.co.sony.csl.dcoes.apis.common.util.AnotherFileHandler.count setting</p></td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;apis-log&gt;</p>
<p>&lt;multicast&gt;&lt;level&gt;</p></td>
<td><p>The apis-log logging.properties file jp.co.sony.csl.dcoes.apis.common.util.MulticastHandler.level setting</p></td>
</tr>
<tr class="even">
<td>&lt;logging&gt;&lt;multicast&gt;&lt;ipv6&gt;</td>
<td>The apis-log config.json file logReceiver.ipv6 setting</td>
</tr>
<tr class="odd">
<td><p>&lt;logging&gt;&lt;multicast&gt;</p>
<p>&lt;groupAddress&gt;</p></td>
<td>The apis-log config.json file logReceiver.multicastGroupAddess setting<br />
and the apis-main, apis-web, apis-ccc, and apis-log logging.properties file jp.co.sony.csl.dcoes.apis.common.util.MulticastHandler.groupAddress setting</td>
</tr>
<tr class="even">
<td>&lt;logging&gt;&lt;multicast&gt;&lt;port&gt;</td>
<td>The apis-log config.json file logReceiver.port setting and the apis-main, apis-web, apis-ccc, and apis-log logging.properties file jp.co.sony.csl.dcoes.apis.common.util.MulticastHandler.port setting</td>
</tr>
<tr class="odd">
<td>&lt;logging&gt;&lt;mongoDb&gt;&lt;enabled&gt;</td>
<td>The apis-log config.json file mongoDbWriter.enabled setting</td>
</tr>
<tr class="even">
<td>&lt;logging&gt;&lt;mongoDb&gt;&lt;level&gt;</td>
<td>The apis-log config.json file mongoDbWriter.level setting</td>
</tr>
<tr class="odd">
<td>&lt;logging&gt;&lt;mongoDb&gt;&lt;host&gt;</td>
<td>The apis-log config.json file mongoDbWriter.host setting</td>
</tr>
<tr class="even">
<td>&lt;logging&gt;&lt;mongoDb&gt;&lt;port&gt;</td>
<td>The apis-log config.json file mongoDbWriter.port setting</td>
</tr>
<tr class="odd">
<td>&lt;logging&gt;&lt;mongoDb&gt;&lt;ssl&gt;</td>
<td>The apis-log config.json file mongoDbWriter.ssl setting</td>
</tr>
<tr class="even">
<td>&lt;logging&gt;&lt;mongoDb&gt;&lt;database&gt;</td>
<td>The apis-log config.json file mongoDbWriter.database setting</td>
</tr>
<tr class="odd">
<td>&lt;logging&gt;&lt;mongoDb&gt;&lt;collection&gt;</td>
<td>The apis-log config.json file mongoDbWriter.collection setting</td>
</tr>
<tr class="even">
<td>&lt;policy&gt;&lt;refreshingPeriodMsec&gt;</td>
<td>The refreshingPeriodMsec setting in the policy.json file</td>
</tr>
<tr class="odd">
<td>&lt;policy&gt;&lt;operationMode&gt;</td>
<td>The operationMode setting in the policy.json file</td>
</tr>
<tr class="even">
<td>&lt;policy&gt;&lt;memberUnitIds&gt;</td>
<td>The memberUnitIds setting in the policy.json file</td>
</tr>
<tr class="odd">
<td>&lt;policy&gt;&lt;largeCapacityUnitIds&gt;</td>
<td>The largeCapacityUnitIds setting in the policy.json file</td>
</tr>
<tr class="even">
<td>&lt;policy&gt;&lt;operationGridVoltageV&gt;</td>
<td>The operationGridVoltageV setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;operationGridVoltage</p>
<p>VRange&gt;&lt;min&gt;</p></td>
<td>The operationGridVoltageVRange.min setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;operationGridVoltage</p>
<p>VRange&gt;&lt;max&gt;</p></td>
<td>The operationGridVoltageVRange.max setting in the policy.json file</td>
</tr>
<tr class="odd">
<td>&lt;policy&gt;&lt;gridVoltageSeparationV&gt;</td>
<td>The gridVoltageSeparationV setting in the policy.json file</td>
</tr>
<tr class="even">
<td>&lt;policy&gt;&lt;gridVoltageAllowanceV&gt;</td>
<td>The gridVoltageAllowanceV setting in the policy.json file</td>
</tr>
<tr class="odd">
<td>&lt;policy&gt;&lt;gridVoltageDropAllowanceV&gt;</td>
<td>The gridVoltageDropAllowanceV setting in the policy.json file</td>
</tr>
<tr class="even">
<td>&lt;policy&gt;&lt;gridCurrentStepA&gt;</td>
<td>The gridCurrentStepA setting in the policy.json file</td>
</tr>
<tr class="odd">
<td>&lt;policy&gt;&lt;gridUvloMaskV&gt;</td>
<td>The gridUvloMaskV setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;safety&gt;&lt;sumOfDealing</p>
<p>UnitGridCurrentAllowancePerUnitA&gt;</p></td>
<td>The safety.sumOfDealingUnitGridCurrentAllowancePerUnitA setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;safety&gt;</p>
<p>&lt;sumOfDealGridCurrentMaxA&gt;</p></td>
<td>The safety.sumOfDealGridCurrentMaxA setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;safety&gt;&lt;gridTopologyBased</p>
<p>Evaluation&gt;&lt;enabled&gt;</p></td>
<td>The safety.gridTopologyBasedEvaluation.enabled setting in the policy.json file</td>
</tr>
<tr class="odd">
<td>&lt;policy&gt;&lt;heloPeriodMsec&gt;</td>
<td>The heloPeriodMsec setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;controller&gt;&lt;dcdc&gt;</p>
<p>&lt;checkpoint&gt;&lt;retryLimit&gt;</p></td>
<td>The controller.dcdc.checkpoint.retryLimit setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;controller&gt;&lt;dcdc&gt;</p>
<p>&lt;checkpoint&gt;&lt;retryWaitMsec&gt;</p></td>
<td>The controller.dcdc.checkpoint.retryWaitMsec setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;controller&gt;&lt;dcdc&gt;</p>
<p>&lt;voltageReference&gt;&lt;rampUp&gt;</p>
<p>&lt;first&gt;&lt;timeoutMsec&gt;</p></td>
<td>The controller.dcdc.voltageReference.rampUp.first.timeoutMsec setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;controller&gt;&lt;dcdc&gt;</p>
<p>&lt;voltageReference&gt;&lt;authorization&gt;&lt;numberOfTrials&gt;</p></td>
<td>The controller.dcdc.voltageReference.authorization.numberOfTrials setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;controller&gt;</p>
<p>&lt;scramVoltageReferenceDelayMsec&gt;</p></td>
<td>The controller.scramVoltageReferenceDelayMsec setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;controller&gt;</p>
<p>&lt;stopMeTimeoutMsec&gt;</p></td>
<td>The controller.stopMeTimeoutMsec setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;controller&gt;</p>
<p>&lt;stopMeCheckPeriodMsec&gt;</p></td>
<td>The controller.stopMeCheckPeriodMsec setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;controller&gt;</p>
<p>&lt;dataAcquisitionPeriodMsec&gt;</p></td>
<td>The controller.dataAcquisitionPeriodMsec setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;controller&gt;</p>
<p>&lt;requestTimeoutMsec&gt;</p></td>
<td>The controller.requestTimeoutMsec setting in the policy.json file</td>
</tr>
<tr class="odd">
<td>&lt;policy&gt;&lt;controller&gt;&lt;retryLimit&gt;</td>
<td>The controller.retryLimit setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;user&gt;</p>
<p>&lt;errorHandlingPeriodMsec&gt;</p></td>
<td>The user.errorHandlingPeriodMsec setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;user&gt;</p>
<p>&lt;errorSustainingMsec&gt;</p></td>
<td>The user.errorSustainingMsec setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;user&gt;</p>
<p>&lt;houseKeepingPeriodMsec&gt;</p></td>
<td>The user.houseKeepingPeriodMsecc setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;mediator&gt;&lt;deal&gt;</p>
<p>&lt;gridCurrentA&gt;</p></td>
<td>The mediator.deal.gridCurrentA setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;mediator&gt;&lt;deal&gt;</p>
<p>&lt;amountMinWh&gt;</p></td>
<td>The mediator.deal.amountMinWh setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;mediator&gt;&lt;deal&gt;</p>
<p>&lt;amountMaxWh&gt;</p></td>
<td>The mediator.deal.amountMaxWh setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;mediator&gt;&lt;deal&gt;</p>
<p>&lt;amountUnitWh&gt;</p></td>
<td>The mediator.deal.amountUnitWh setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;mediator&gt;</p>
<p>&lt;negotiationTimeoutMsec&gt;</p></td>
<td>The mediator.negotiationTimeoutMsec setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;mediator&gt;</p>
<p>&lt;dealLoggingPeriodMsec&gt;</p></td>
<td>The dealLoggingPeriodMsec setting in the policy.json file</td>
</tr>
<tr class="odd">
<td>&lt;policy&gt;&lt;gridMaster&gt; &lt;voltageReferenceSide&gt;</td>
<td>The gridMaster.voltageReferenceSide setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;</p>
<p>&lt;voltageReferenceTakeOverDvg&gt;</p></td>
<td>The gridMaster.voltageReferenceTakeOverDvg setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;</p>
<p>&lt;masterDealSelection&gt;&lt;strategy&gt;</p></td>
<td>The gridMaster.masterDealSelection setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;</p>
<p>&lt;gridMasterSelection&gt;&lt;strategy&gt;</p></td>
<td>The gridMaster.gridMasterSelection.strategy setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;</p>
<p>&lt;gridMasterSelection&gt;&lt;fixedUnitId&gt;</p></td>
<td>The gridMaster.gridMasterSelection.fixedUnitId setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;</p>
<p>&lt;gridMasterEnsuring&gt;</p>
<p>&lt;interlockInconsistency&gt;</p>
<p>&lt;retryWaitMsec&gt;</p></td>
<td>The gridMaster.gridMasterEnsuring.interlockInconsistency.retryWaitMsec setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;</p>
<p>&lt;gridMasterWatching&gt;</p>
<p>&lt;absence&gt;&lt;ensureWaitMsec&gt;</p></td>
<td>The gridMaster.gridMasterWatching.absence.ensureWaitMsec setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;&lt;deal&gt;</p>
<p>&lt;forceStopCondition&gt;</p>
<p>&lt;dischargeUnitLowerLimitRsoc&gt;</p></td>
<td>The gridMaster.deal.forceStopCondition.dischargeUnitLowerLimitRsoc setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;&lt;deal&gt;</p>
<p>&lt;forceStopCondition&gt;</p>
<p>&lt;chargeUnitUpperLimitRsoc&gt;</p></td>
<td>The gridMaster.deal.forceStopCondition.chargeUnitUpperLimitRsoc setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;&lt;deal&gt;</p>
<p>&lt;referenceSide&gt;</p></td>
<td>The gridMaster.deal.referenceSide setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;&lt;deal&gt;</p>
<p>&lt;resetLimit&gt;</p></td>
<td>The gridMaster.deal.resetLimit setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;</p>
<p>&lt;currentCompensation&gt;</p>
<p>&lt;limitOfTrials&gt;</p></td>
<td>The gridMaster.deal.currentCompensation.limitOfTrials setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;</p>
<p>&lt;currentCompensation&gt;</p>
<p>&lt;driftAllowanceA&gt;</p></td>
<td>The gridMaster.currentCompensation.driftAllowanceA setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;</p>
<p>&lt;gridVoltageOptimization&gt;</p>
<p>&lt;enabled&gt;</p></td>
<td>The gridMaster.gridVoltageOptimization.enabled setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;</p>
<p>&lt;heloPeriodMsec&gt;</p></td>
<td>The gridMaster.heloPeriodMsec setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;</p>
<p>&lt;dataCollectionPeriodMsec&gt;</p></td>
<td>The gridMaster.dataCollectionPeriodMsec setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;</p>
<p>&lt;dataCollectionTimeoutMsec&gt;</p></td>
<td>The gridMaster.dataCollectionTimeoutMsec setting in the policy.json file</td>
</tr>
<tr class="even">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;</p>
<p>&lt;mainLoopPeriodMsec&gt;</p></td>
<td>The gridMaster.mainLoopPeriodMsec setting in the policy.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;policy&gt;&lt;gridMaster&gt;</p>
<p>&lt;errorSustainingMsec&gt;</p></td>
<td>The gridMaster.errorSustainingMsec setting in the policy.json file</td>
</tr>
<tr class="even">
<td>&lt;scenario&gt;&lt;refreshingPeriodMsec&gt;</td>
<td>The refreshingPeriodMsec setting in the scenario.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;scenario&gt;&lt;acceptSelections&gt;</p>
<p>&lt;strategy&gt;</p></td>
<td>The acceptSelections.strategy setting in the scenario.json file</td>
</tr>
<tr class="even">
<td>&lt;scenario&gt;&lt;content&gt;</td>
<td>The scenario setting in the scenario.json file</td>
</tr>
<tr class="odd">
<td>&lt;firstCop&gt;&lt;hostName&gt;</td>
<td>The IP address of the apis-web, apis-ccc, and apis-log start-up node</td>
</tr>
<tr class="even">
<td>&lt;firstCop&gt;&lt;account&gt;</td>
<td>The account name of the apis-web, apis-ccc, and apis-log start-up node</td>
</tr>
<tr class="odd">
<td><p>&lt;firstCop&gt;&lt;cluster&gt;&lt;hazelcast&gt;</p>
<p>&lt;network&gt;&lt;interfaces&gt;&lt;enabled&gt;</p></td>
<td>The /hazelcast/network/interfaces/@enabled setting in the apis-web and apis-ccc cluster.xml file.</td>
</tr>
<tr class="even">
<td><p>&lt;firstCop&gt;&lt;cluster&gt;&lt;hazelcast&gt;</p>
<p>&lt;network&gt;&lt;interfaces&gt;&lt;interface&gt;</p></td>
<td><p>The /hazelcast/network/interfaces/interface setting in the apis-web and apis-ccc cluster.xml file.</p>
<p>(Ex.: IPv4: 192.168.0.100,</p>
<p>IPv6: fe80::ba27:ebff:feb2:f8a8)</p></td>
</tr>
<tr class="odd">
<td><p>&lt;firstCop&gt;&lt;start&gt;&lt;apis-web&gt;</p>
<p>&lt;JvmOption&gt;</p></td>
<td>The java start-up argument setting in the apis-web start.sh script</td>
</tr>
<tr class="header">
<td><p>&lt;firstCop&gt;&lt;start&gt;&lt;apis-web&gt;</p>
<p>&lt;vertxOption&gt;</p></td>
<td>The java start-up argument setting in the apis-web start.sh script</td>
</tr>
<tr class="odd">
<td><p>&lt;firstCop&gt;&lt;start&gt;&lt;apis-ccc&gt;</p>
<p>&lt;JvmOption&gt;</p></td>
<td>The java start-up argument setting in the apis-ccc start.sh script</td>
</tr>
<tr class="even">
<td><p>&lt;firstCop&gt;&lt;start&gt;&lt;apis-ccc&gt;</p>
<p>&lt;vertxOption&gt;</p></td>
<td>The java start-up argument setting in the apis-ccc start.sh script</td>
</tr>
<tr class="odd">
<td><p>&lt;firstCop&gt;&lt;start&gt;&lt;apis-log&gt;</p>
<p>&lt;JvmOption&gt;</p></td>
<td>The java start-up argument setting in the apis-log start.sh script</td>
</tr>
<tr class="even">
<td><p>&lt;firstCop&gt;&lt;start&gt;&lt;apis-log&gt;</p>
<p>&lt;vertxOption&gt;</p></td>
<td>The java start-up argument setting in the apis-log start.sh script</td>
</tr>
<tr class="odd">
<td><p>&lt;firstCop&gt;&lt;watchdog&gt;</p>
<p>&lt;apis-web&gt;&lt;enabled&gt;</p></td>
<td>The watchdog.enabled setting in the apis-web config.json file</td>
</tr>
<tr class="even">
<td><p>&lt;firstCop&gt;&lt;watchdog&gt;</p>
<p>&lt;apis-ccc&gt;&lt;enabled&gt;</p></td>
<td>The watchdog.enabled setting in the apis-ccc config.json file</td>
</tr>
<tr class="odd">
<td><p>&lt;firstCop&gt;&lt;watchdog&gt;</p>
<p>&lt;apis-log&gt;&lt;enabled&gt;</p></td>
<td>The watchdog.enabled setting in the apis-log config.json file</td>
</tr>
<tr class="even">
<td>&lt;copList&gt;&lt;cop&gt;&lt;hostname&gt;</td>
<td><p>The IP address setting of the nodes started up by apis-main</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="odd">
<td>&lt;copList&gt;&lt;cop&gt;&lt;account&gt;</td>
<td><p>The account name setting of the nodes started up by apis-main</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="even">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;cluster&gt;</p>
<p>&lt;hazelcast&gt;&lt;network&gt;&lt;interface&gt;</p>
<p>&lt;enabled&gt;</p></td>
<td><p>The /hazelcast/network/interface/enabled setting in the apis-main cluster.xml file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="odd">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;cluster&gt;</p>
<p>&lt;hazelcast&gt;&lt;network&gt;&lt;interface&gt;</p>
<p>&lt;interface&gt;</p></td>
<td><p>The /hazelcast/network/interfaces/interface setting in the apis-main cluster.xml file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="even">
<td>&lt;copList&gt;&lt;cop&gt;&lt;unitId&gt;</td>
<td><p>The unitId setting in the apis-main config.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="odd">
<td>&lt;copList&gt;&lt;cop&gt;&lt;unitName&gt;</td>
<td><p>The unitName setting in the apis-main config.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="even">
<td>&lt;copList&gt;&lt;cop&gt;&lt;serialNumber&gt;</td>
<td><p>The serialNumber setting in the apis-main config.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="odd">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;hwConfig&gt;</p>
<p>&lt;refreshingPeriodMsec&gt;</p></td>
<td><p>The refreshingPeriodMsec setting in the apis-main hwConfig.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="even">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;hwConfig&gt;</p>
<p>&lt;batteryNominalCapacityWh&gt;</p></td>
<td><p>The batteryNominalCapacityWh setting in the apis-main hwConfig.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="odd">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;hwConfig&gt;</p>
<p>&lt;gridCurrentCapacityA&gt;</p></td>
<td><p>The gridCurrentCapacityA setting in the apis-main hwConfig.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="even">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;hwConfig&gt;</p>
<p>&lt;gridCurrentAllowanceA&gt;</p></td>
<td><p>The gridCurrentAllowanceA setting in the apis-main hwConfig.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="odd">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;hwConfig&gt;</p>
<p>&lt;droopRatio&gt;</p></td>
<td><p>The droopRatio setting in the apis-main hwConfig.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="even">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;hwConfig&gt;</p>
<p>&lt;efficientBatteryGridVoltageRatio&gt;</p></td>
<td><p>The efficientBatteryGridVoltageRatio setting in the apis-main hwConfig.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="odd">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;hwConfig&gt;</p>
<p>&lt;safe&gt;&lt;range&gt;&lt;dcdc&gt;&lt;meter&gt;</p>
<p>&lt;tmp&gt;&lt;min&gt;</p></td>
<td><p>The safe.range.dcdc.meter.tmp.min setting in the apis-main hwConfig.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="even">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;hwConfig&gt;</p>
<p>&lt;safe&gt;&lt;range&gt;&lt;dcdc&gt;&lt;meter&gt;</p>
<p>&lt;tmp&gt;&lt;max&gt;</p></td>
<td><p>The safe.range.dcdc.meter.tmp.max setting in the apis-main hwConfig.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;hwConfig&gt;</p>
<p>&lt;safe&gt;&lt;range&gt;&lt;dcdc&gt;&lt;meter&gt;</p>
<p>&lt;vg&gt;&lt;min&gt;</p></td>
<td><p>The safe.range.dcdc.meter.vg.min setting in the apis-main hwConfig.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="even">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;hwConfig&gt;</p>
<p>&lt;safe&gt;&lt;range&gt;&lt;dcdc&gt;&lt;meter&gt;</p>
<p>&lt;vg&gt;&lt;max&gt;</p></td>
<td><p>The safe.range.dcdc.meter.vg.max setting in the apis-main hwConfig.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="odd">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;hwConfig&gt;</p>
<p>&lt;safe&gt;&lt;range&gt;&lt;dcdc&gt;&lt;meter&gt;</p>
<p>&lt;vb&gt;&lt;min&gt;</p></td>
<td><p>The safe.range.dcdc.meter.vb.min setting in the apis-main hwConfig.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="even">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;hwConfig&gt;</p>
<p>&lt;safe&gt;&lt;range&gt;&lt;dcdc&gt;&lt;meter&gt;</p>
<p>&lt;vb&gt;&lt;max&gt;</p></td>
<td><p>The safe.range.dcdc.meter.vb.max setting in the apis-main hwConfig.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="odd">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;hwConfig&gt;</p>
<p>&lt;safe&gt;&lt;range&gt;&lt;dcdc&gt;&lt;meter&gt;</p>
<p>&lt;ig&gt;&lt;min&gt;</p></td>
<td><p>The safe.range.dcdc.meter.ig.min setting in the apis-main hwConfig.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="even">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;hwConfig&gt;</p>
<p>&lt;safe&gt;&lt;range&gt;&lt;dcdc&gt;&lt;meter&gt;</p>
<p>&lt;ig&gt;&lt;max&gt;</p></td>
<td><p>The safe.range.dcdc.meter.ig.max setting in the apis-main hwConfig.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="odd">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;hwConfig&gt;</p>
<p>&lt;safe&gt;&lt;range&gt;&lt;dcdc&gt;&lt;meter&gt;</p>
<p>&lt;ib&gt;&lt;min&gt;</p></td>
<td><p>The safe.range.dcdc.meter.ib.min setting in the apis-main hwConfig.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="even">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;hwConfig&gt;</p>
<p>&lt;safe&gt;&lt;range&gt;&lt;dcdc&gt;&lt;meter&gt;</p>
<p>&lt;ib&gt;&lt;max&gt;</p></td>
<td><p>The safe.range.dcdc.meter.ib.max setting in the apis-main hwConfig.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="odd">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;controlCenter&gt;</p>
<p>&lt;enabled&gt;</p></td>
<td><p>The controlCenter.enabled setting in the apis-main config.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="even">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;controlCenter&gt;</p>
<p>&lt;account&gt;</p></td>
<td><p>The controlCenter.account setting in the apis-main config.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="odd">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;controlCenter&gt;</p>
<p>&lt;password&gt;</p></td>
<td><p>The controlCenter.password setting (password md5) in the apis-main config.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="even">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;scenario&gt;</p>
<p>&lt;refreshingPeriodMsec&gt;</p></td>
<td><p>The refreshingPeriodMsec setting in the apis-main scenario.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="odd">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;scenario&gt;</p>
<p>&lt;acceptSelection&gt;&lt;strategy&gt;</p></td>
<td><p>The acceptSelection.strategy setting in the apis-main scenario.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="even">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;scenario&gt;</p>
<p>&lt;content&gt;</p></td>
<td><p>The scenario setting in the apis-main scenario.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="odd">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;start&gt;&lt;apis-main&gt;</p>
<p>&lt;jvmOption&gt;</p></td>
<td><p>The java start-up argument setting in the apis-main start.sh script</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="even">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;start&gt;&lt;apis-main&gt;</p>
<p>&lt;vertxOption&gt;</p></td>
<td><p>The java start-up argument setting in the apis-main start.sh script</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
<tr class="odd">
<td><p>&lt;copList&gt;&lt;cop&gt;&lt;watchdog&gt;</p>
<p>&lt;enabled&gt;</p></td>
<td>The watchdog.enabled setting in the apis-main start.sh script<br />
(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</td>
</tr>
<tr class="even">
<td><p>&lt;copList&gt;&lt;cop&gt;
<p>&lt;batteryCapacityManagement&gt;&lt;enabled&gt;</p></td>
<td><p>The batteryCapacityManagement.enabled setting in the apis-main config.json file</p>
<p>(The range of the &lt;cop&gt;&lt;/cop&gt; tag pairs in the &lt;copList&gt; item is set to the number of nodes that are participating in the cluster.)</p></td>
</tr>
</tbody>
</table>

<br>

## **5.2. The installer.conf file**

The /config/installer.conf file contains the information required for installing software related to APIS in each node.

|||
| ------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------ |
| GIT\_BASE\_URL                                                                        | The URL for github/SonyCSL                                                                                               |
| ZERO\_ADDRESS                                                                         | The IP Address for node(ZERO)                                                                                            |
| ZERO\_USERNAME                                                                        | The Linux OS account name for node(ZERO)                                                                                 |
| ZERO\_PASSWORD                                                                        | The Linux OS password for node(ZERO)                                                                                     |
| COP\_PASSWORD                                                                         | The Linux OS password for node(COP)                                                                                      |
| MASTER\_KEY\_NAME                                                                     | The name of the ssh master key                                                                                           |
| INSTALLER\_INTERFACE                                                                  | The Ethernet interface of the PC on which apis-build\_version\_up\_system is running and which is connected to each node |
| WORK\_DIR                                                                             | The absolute path or the relative path from BASEDIR (/apis-build\_version\_up\_system)                                   |
| The absolute path or the relative path from BASEDIR(/apis-build\_version\_up\_system) | The absolute path or the relative path from BASEDIR (/apis-build\_version\_up\_system)                                   |
| COP\_COMMUNITY                                                                        | The APIS community name                                                                                                  |
| APIS\_VERSION                                                                         | The version of the apis-main software                                                                                    |
| COP\_VERSION                                                                          | The version of cop-\*.xml                                                                                                |

<br>

## **5.3. The make.conf file**

The /tool/ApisInstaller/make.conf file is used as the configuration file when running ApisInstaller as a stand-alone program; it is not accessed when apis-build\_version\_up\_system is used.

|||
| ------------- | ------------------------------------------------------------------------------------------------------------------------ |
| gitBaseUrl    | The URL for github/SonyCSL                                                                                               |
| copCommunity  | The APIS community name                                                                                                  |
| version       | The version of the apis-main software                                                                                    |
| copVersion    | The version of cop-\*.xml                                                                                                |
| sshPassphrase | The ssh pass-phrase                                                                                                      |
| interface     | The Ethernet interface of the PC on which is apis-build\_version\_up\_system running and which is connected to each node |
| logDir        | The absolute path or the relative path from /ApisInstaller                                                               |
| workDir       | The absolute path or the relative path from /ApisInstaller                                                               |

<br>

# **6. Open-Source Software Licenses**

Information on the software used by Build & Version Up System and its open-source software licensing is presented in the following table.

■ Software used by apis-build\_version\_up\_system and its open-source software licensing

| Software           | Version | License            | Code Modification |
| ------------------ | ------- | ------------------ | ----------------- |
| maven              | 3.6.2   | Apache License 2.0 | None              |
| scala-maven-plugin | 3.4.4   | Unlicense          | None              |
| groovy             | 2.4.15  | Apache License 2.0 | None              |
| expect             | 5.45    | MIT License        | None              |

\*Software versions may change for various reasons.

<br>

# **7. Preparation**
    
## **7.1. IoT board preparation example**

The following explanation is for the example of a Raspberry Pi 3B and Debian Buster 10 environment.

1.  Obtain a Debian Buster10 image, write it to an SD card, and boot it up.  
     http://ftp.jaist.ac.jp/pub/raspberrypi/raspios\_arm64/images/raspios\_arm64-2020-08-24/

2.  Enable ssh.  
   Select the following from the menu icon on the top left of the desktop  
   Preferences -\> Raspberry Pi Configuration -\> Interfaces -\> SSH Enabled

3.  Set up an oesunit account.    
    > $ sudo adduser oesunit  
    &emsp;Password: oes

4.  Add a sudo user to the oesunit account.  
    > $ sudo usermod -G sudo oesunit

5.  Specify the IP address.  
    > $ sudo vi /etc/dhcpcd.conf  
    &emsp;interface eth0  
    &emsp;static ip\_address=192.168.x.x  
    &emsp;static ip6\_address=xxx  
    &emsp;static routers=192.168.x.1  
    &emsp;static domain\_name\_servers=192.168.x.1 8.8.8.8

6.  Install ntpdate.  
    > $ sudo apt install ntpdate

7.  Change the time zone from UTC to JST.  
    > $ sudo ln -sf /usr/share/zoneinfo/Asia/Tokyo /etc/localtime  
    $ sudo dpkg-reconfigure tzdata

8.  Download AdoptOpenJDK.  
   https://adoptopenjdk.net/releases.html  
   OpenJDK11U-jdk\_aarch64\_linux\_hotspot\_11.0.9.1\_1.tar.gz

9.  Install AdoptOpenJDK.  
   Place AdoptOpenJDK in /usr/local.  
    > $ cd /usr/local  
    $ sudo tar xzvf OpenJDK11U-jdk\_aarch64\_linux\_hotspot\_11.0.9\_1\_1.tar.gz  
    $ sudo chown root:staff jdk-11.0.9.1+1/  
    $ sudo ln -s jdk-11.0.9.1+1 java11  
    $ cd /bin  
    $ sudo ln -s /usr/local/java11/bin/java java  
    $ java -version  
openjdk version "11.0.9.1" 2020-11-04

<br>

## **7.2. Configuration file preparation example**

Refer to section 5, “Configuration Files” and revise the cop-\*.xml and installer.conf files located under the /config folder of apis-build\_version\_up\_system to suit your own environment. The default APIS evaluation environment assumes the configuration illustrated in Figure 7-1 of section 7.3, “Example of installation on an IoT board.” When changing the number of COP nodes or the IP addresses, the files must be revised. To add one COP node, copy the information between the \<cop\> and \</cop\> tags, which are found between the \<copList\> and \</copList\> tags in the cop-\*.xml file and add the information for the new node.

<br>

## **7.3. Example of installation on an IoT board**

The environment for installing APIS-related software on IoT boards using the default settings of apis-build\_version\_up\_system is illustrated in Figure 7-1.

It is assumed that the computer on which apis-build\_version\_up\_system runs and the IoT board of each node (ZERO, FIRST, and COP1 through 4) are assigned fixed IP addresses.

It is also assumed that the computer and the IoT boards are connected to a router and set up for access to GitHub and various software download sites via the Internet.

![](media/media/image3.png)  
Figure ７-1

